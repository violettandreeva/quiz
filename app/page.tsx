"use client"

import { useState } from "react"
import * as React from "react"
import { Button } from "@/components/ui/button"
import { Card, CardContent } from "@/components/ui/card"
import { Badge } from "@/components/ui/badge"
import { Heart, Leaf, Users, Clock, Shield, ArrowRight } from "lucide-react"
import Image from "next/image"

/* ----------  LoadingPage.tsx (local component) ---------- */
interface LoadingPageProps {
  onComplete: () => void
}

function LoadingPage({ onComplete }: LoadingPageProps) {
  const steps = [
    "–ò–∑—É—á–∞–µ–º —Å–∞–π—Ç—ã (1/53)",
    "–°–º–æ—Ç—Ä–∏–º –æ—Ç–∑—ã–≤—ã",
    "–ò—â–µ–º –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã",
    "–ò—â–µ–º –ª—É—á—à—É—é —Ü–µ–Ω—É",
    "–°—Ä–∞–≤–Ω–∏–≤–∞–µ–º —Å –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–∞–º–∏",
  ]
  const [activeStep, setActiveStep] = React.useState(0)
  const [completed, setCompleted] = React.useState<boolean[]>(Array(steps.length).fill(false))
  const allComplete = completed.every(Boolean)

  React.useEffect(() => {
    if (allComplete) {
      // Small pause so the user can see the finished list
      const timeout = setTimeout(onComplete, 1500)
      return () => clearTimeout(timeout)
    }

    const id = setTimeout(() => {
      setCompleted((prev) => {
        const next = [...prev]
        next[activeStep] = true
        return next
      })
      setActiveStep((prev) => Math.min(prev + 1, steps.length - 1))
    }, 500)

    return () => clearTimeout(id)
  }, [activeStep, allComplete, onComplete, steps.length])

  return (
    <div
      className="min-h-screen relative overflow-hidden"
      style={{ background: "linear-gradient(to bottom, #f7fdf9, #fffdf5)" }}
    >
      {/* floating particles */}
      <div className="absolute inset-0 opacity-10 pointer-events-none">
        {[...Array(12)].map((_, i) => (
          <div
            key={i}
            className="absolute w-2 h-2 bg-green-400 rounded-full animate-pulse"
            style={{
              left: `${Math.random() * 100}%`,
              top: `${Math.random() * 100}%`,
              animationDelay: `${Math.random() * 20}s`,
              animationDuration: "20s",
            }}
          />
        ))}
      </div>

      {/* header logo */}
      <div className="absolute top-8 left-1/2 -translate-x-1/2 flex items-center gap-2">
        <Heart className="w-8 h-8 text-green-600" />
        <span className="text-2xl font-bold text-gray-800">NaturalSlim</span>
      </div>

      {/* center card */}
      <div className="min-h-screen flex items-center justify-center p-4">
        <div className="w-full max-w-sm bg-white/70 backdrop-blur-sm rounded-2xl shadow-lg p-8">
          {/* spinner & title */}
          <div className="flex items-center gap-3 mb-5 justify-center">
            <div
              className="w-8 h-8 border-[3px] border-green-600 border-t-transparent rounded-full animate-spin"
              style={{ animationDuration: "1.2s" }}
            />
            <h3 className="text-lg font-semibold text-gray-800">–ó–∞–≥—Ä—É–∑–∫–∞</h3>
          </div>

          {/* checklist */}
          <div className="space-y-3 mb-6">
            {steps.map((text, idx) => (
              <div
                key={idx}
                className={`flex items-center gap-3 transition-all duration-500 ${idx <= activeStep ? "opacity-100 translate-y-0" : "opacity-0 translate-y-2"
                  }`}
                style={{ transitionDelay: `${idx * 100}ms` }}
              >
                {/* icon */}
                {completed[idx] ? (
                  <div className="w-5 h-5 bg-green-600 rounded-full flex items-center justify-center">
                    <svg className="w-3 h-3 text-white" fill="currentColor" viewBox="0 0 20 20">
                      <path
                        fillRule="evenodd"
                        d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                        clipRule="evenodd"
                      />
                    </svg>
                  </div>
                ) : (
                  <div
                    className={`w-5 h-5 rounded-full border-2 ${idx === activeStep ? "border-green-600" : "border-gray-300"
                      }`}
                  />
                )}

                {/* text */}
                <span
                  className={`text-sm font-medium transition-colors duration-1000 ${idx === activeStep && !completed[idx]
                      ? "text-green-600 animate-pulse"
                      : completed[idx]
                        ? "text-gray-700"
                        : "text-gray-500"
                    }`}
                >
                  {text}
                </span>
              </div>
            ))}
          </div>

          {/* progress bar */}
          {!allComplete && (
            <div className="mb-6">
              <div className="w-full h-1 bg-gray-200 rounded-full">
                <div
                  className="h-1 bg-green-600 rounded-full transition-all duration-300"
                  style={{ width: `${((activeStep + 1) / steps.length) * 100}%` }}
                />
              </div>
            </div>
          )}

          {/* footer hint */}
          <p className="text-xs text-gray-500 text-center">–≠—Ç–æ –∑–∞–π–º—ë—Ç –º–µ–Ω—å—à–µ –º–∏–Ω—É—Ç—ã‚Ä¶</p>
        </div>
      </div>
    </div>
  )
}

interface QuizAnswer {
  questionId: string
  answer: string
  category: "eating" | "lifestyle" | "attempts"
}

interface Question {
  id: string
  category: "eating" | "lifestyle" | "attempts"
  question: string
  options: { text: string; emoji: string }[]
}

const quizQuestions: Question[] = [
  // Eating Section (3 questions)
  {
    id: "eating-1",
    category: "eating",
    question: "–í—ã –ø—Ä–æ—Å–Ω—É–ª–∏—Å—å –≤ 9 —á–∞—Å–æ–≤ —É—Ç—Ä–∞ –≤ –≤—ã—Ö–æ–¥–Ω–æ–π, –∫–∞–∫–æ–π –∑–∞–≤—Ç—Ä–∞–∫ –≤—ã –≤—ã–±–µ—Ä–µ—Ç–µ?",
    options: [
      { text: "–Ø–π—Ü–∞ —Å –∂–∞—Ä–µ–Ω—ã–º–∏ –∫–æ–ª–±–∞—Å–∫–∞–º–∏, —Ç–∞–º–∞–ª–µ –∏–ª–∏ –ø–∞—Ä–∞ –±—É–ª–æ—á–µ–∫ —Å –∫–æ—Ñ–µ —Å —Å–∞—Ö–∞—Ä–æ–º", emoji: "üç≥" },
      { text: "–¢–æ—Ä—Ç–∏–ª—å–∏ –∏–ª–∏ –ª–µ–ø–µ—à–∫–∏ —Å –Ω–∞—á–∏–Ω–∫–æ–π: —Å–ª–∞–¥–∫–æ–π –∫—É–∫—É—Ä—É–∑–æ–π, —Å—ã—Ä–æ–º, –∞–≤–æ–∫–∞–¥–æ –∏–ª–∏ –≤–∞—Ä–µ–Ω—å–µ–º", emoji: "üåØ" },
      { text: "–ö–∞—à–∞ —Å —Ñ—Ä—É–∫—Ç–∞–º–∏ –∏ —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –¥–æ–±–∞–≤–∫–∞–º–∏", emoji: "ü•£" },
      { text: "–ù–∏—á–µ–≥–æ ‚Äì —Å —É—Ç—Ä–∞ –Ω–µ —Ö–æ—á–µ—Ç—Å—è –µ—Å—Ç—å", emoji: "üò¥" },
    ],
  },
  {
    id: "eating-2",
    category: "eating",
    question: "–£ –≤–∞—Å –æ–±–µ–¥ –Ω–∞ —Ä–∞–±–æ—Ç–µ, –∫–∞–∫—É—é –µ–¥—É –≤—ã –≤–∑—è–ª–∏ –∏–∑ –¥–æ–º–∞ –∏–ª–∏ –∫—É–ø–∏–ª–∏?",
    options: [
      { text: "–ñ–∞—Ä–µ–Ω—ã–π —Ä–∏—Å –æ–≤–æ—â–∞–º–∏, –∫–∞—Ä—Ç–æ—à–∫–æ–π –∏ –º—è—Å–æ–º", emoji: "üçõ" },
      { text: "–°–µ–Ω–¥–≤–∏—á —Å –∫–æ–ª–±–∞—Å–∫–∞–º–∏ –∏–ª–∏ —Å–≤–∏–Ω–∏–Ω–æ–π, –ø–∞—Ä—É —ç–º–ø–∞–Ω–∞–¥ –∏ –≥–∞–∑–∏—Ä–æ–≤–∫–∞", emoji: "" },
      { text: "–ù–µ–±–æ–ª—å—à–æ–π –ø–µ—Ä–µ–∫—É—Å, –∫—Ä–µ–∫–µ—Ä—ã, —Å–Ω–µ–∫–∏", emoji: "üç™" },
      { text: "–°–∞–ª–∞—Ç —Å –∫—É—Ä–∏—Ü–µ–π –≥—Ä–∏–ª—å, –∫–∏–Ω–æ–∞ –∏ –∑–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –æ–ª–∏–≤–∫–æ–≤—ã–º –º–∞—Å–ª–æ–º", emoji: "ü•ó" },
    ],
  },
  {
    id: "eating-3",
    category: "eating",
    question: "–ü–æ–¥—Ä—É–∂–∫–∞ –ø–æ–∑–≤–∞–ª–∞ –≤–∞—Å –Ω–∞ –∫–æ—Ñ–µ –ø–æ—Å–ª–µ —Ä–∞–±–æ—Ç—ã, —á—Ç–æ –∑–∞–∫–∞–∂–µ—Ç–µ?",
    options: [
      { text: "–ë–æ–ª—å—à–æ–π –∫–∞–ø—É—á–∏–Ω–æ —Å —Å–∏—Ä–æ–ø–æ–º, —Ç–æ—Ä—Ç–∏–∫ –∏–ª–∏ –ø–∏—Ä–æ–∂–Ω–æ–µ", emoji: "‚òï" },
      { text: "–ö–æ–ª–∞ –∏–ª–∏ —á–∏—á–∞ –∏ –ø–∞—Ä—É –ø–µ—á–µ–Ω–µ–∫", emoji: "ü•§" },
      { text: "–ß–∞–π –∏–ª–∏ —á–µ—Ä–Ω—ã–π –∫–æ—Ñ–µ –±–µ–∑ —Å–∞—Ö–∞—Ä–∞", emoji: "üçµ" },
      { text: "–ù–∏—á–µ–≥–æ, –Ω–µ —Ö–æ—á—É –æ–ø—è—Ç—å —Å—Ä—ã–≤–∞—Ç—å—Å—è, –Ω–æ –ø–æ—Ç–æ–º —Å—ä–µ–º —á—Ç–æ-—Ç–æ –¥–æ–º–∞", emoji: "üö´" },
    ],
  },
  // Lifestyle Section (4 questions)
  {
    id: "lifestyle-1",
    category: "lifestyle",
    question:
      "–í—ã —É–∂–µ —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ —Å—Ç–æ–ª–∫–Ω—É–ª–∏—Å—å —Å –Ω–µ–ø—Ä–∏—è—Ç–Ω—ã–º–∏ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è–º–∏ –∏–∑–±—ã—Ç–æ—á–Ω–æ–≥–æ –≤–µ—Å–∞. –ú–Ω–æ–≥–æ –ª–∏ —É –≤–∞—Å –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º? (–ø–æ–≤—ã—à–µ–Ω–Ω—ã–π —Ö–æ–ª–µ—Å—Ç–µ—Ä–∏–Ω, –¥–∏–∞–±–µ—Ç –∏ —Ç–¥)",
    options: [
      {
        text: "–î–∞, —É –º–µ–Ω—è —É–∂–µ –µ—Å—Ç—å –ø–æ–≤—ã—à–µ–Ω–Ω—ã–π —Ö–æ–ª–µ—Å—Ç–µ—Ä–∏–Ω, –Ω–∞—á–∞–ª—å–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ –¥–∏–∞–±–µ—Ç–∞ (–∏–ª–∏ –ø—Ä–µ–¥–¥–∏–∞–±–µ—Ç), –≤—ã—Å–æ–∫–æ–µ –¥–∞–≤–ª–µ–Ω–∏–µ –∏ –±–æ–ª–∏ –≤ —Å—É—Å—Ç–∞–≤–∞—Ö",
        emoji: "üö®",
      },
      {
        text: "–£ –º–µ–Ω—è —á–∞—Å—Ç–æ –±–æ–ª–∏—Ç —Å–ø–∏–Ω–∞ –∏ –∫–æ–ª–µ–Ω–∏, –±—ã–≤–∞—é—Ç –æ—Ç–µ–∫–∏, –∏ —è —á—É–≤—Å—Ç–≤—É—é, —á—Ç–æ —Å–µ—Ä–¥—Ü–µ —Å—Ç–∞–ª–æ –ø–æ—à–∞–ª–∏–≤–∞—Ç—å",
        emoji: "üò∞",
      },
      {
        text: "–ü–æ–∫–∞ –Ω–∏—á–µ–≥–æ —Å–µ—Ä—å–µ–∑–Ω–æ–≥–æ, –Ω–æ —è —á—É–≤—Å—Ç–≤—É—é –ø–æ—Å—Ç–æ—è–Ω–Ω—É—é —É—Å—Ç–∞–ª–æ—Å—Ç—å, –æ–¥—ã—à–∫—É –ø—Ä–∏ –Ω–∞–≥—Ä—É–∑–∫–∞—Ö –∏ –±—ã—Å—Ç—Ä–æ –ø–æ—Ç–µ—é",
        emoji: "üòÆ‚Äçüí®",
      },
      { text: "–ù–∏—á–µ–≥–æ –∏–∑ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω–æ–≥–æ –Ω–µ—Ç", emoji: "‚úÖ" },
    ],
  },
  {
    id: "lifestyle-2",
    category: "lifestyle",
    question:
      "–ú—É–∂ —á–µ–º-—Ç–æ –Ω–µ–¥–æ–≤–æ–ª–µ–Ω, –∞ –¥–µ—Ç–∏ —Å–Ω–æ–≤–∞ –Ω–æ—Å—è—Ç—Å—è –ø–æ –¥–æ–º—É, –≤–∞–º –∫–∞–∫ –æ–±—ã—á–Ω–æ —Å–ª–æ–∂–Ω–æ —É—Å–ª–µ–¥–∏—Ç—å –∑–∞ –≤—Å–µ–º, –∫–∞–∫ –±—É–¥–µ—Ç–µ —Å–ø—Ä–∞–≤–ª—è—Ç—å—Å—è —Å–æ —Å—Ç—Ä–µ—Å—Å–æ–º?",
    options: [
      {
        text: "–ó–∞–∫–∞–∂—É —á—Ç–æ-—Ç–æ –≤–∫—É—Å–Ω–µ–Ω—å–∫–æ–µ –Ω–∞ —É–∂–∏–Ω, –Ω–∞–ø—Ä–∏–º–µ—Ä, –∂–∞—Ä–µ–Ω—É—é –∫—É—Ä–∏—Ü—É, –∏ –∫–æ–Ω–µ—á–Ω–æ —á—Ç–æ-—Ç–æ —Å–ª–∞–¥–∫–æ–µ –∫ —á–∞—é",
        emoji: "üçó",
      },
      {
        text: "–£–ª—è–≥—É—Å—å –ø–µ—Ä–µ–¥ —Ç–µ–ª–µ–≤–∏–∑–æ—Ä–æ–º —Å –ø–∞—á–∫–æ–π –ø–µ—á–µ–Ω—å—è, –∏–ª–∏ –≤—ã–ø—å—é —Å–ª–∞–¥–∫–∏–π –Ω–∞–ø–∏—Ç–æ–∫ –∏ –ø–æ—Å—Ç–∞—Ä–∞—é—Å—å –æ—Ç–≤–ª–µ—á—å—Å—è",
        emoji: "üì∫",
      },
      {
        text: "–ü–æ–ø—Ä–æ–±—É—é –∑–∞–Ω—è—Ç—å—Å—è –¥–µ–ª–∞–º–∏, –Ω–æ –≤ –∏—Ç–æ–≥–µ –±—É–¥—É —Ä–∞–∑–¥—Ä–∞–∂–∞—Ç—å—Å—è –Ω–∞ –≤—Å–µ—Ö, –∞ –≤–µ—á–µ—Ä–æ–º, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, —Å—ä–µ–º –ª–∏—à–Ω–µ–≥–æ –∏–∑ —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫–∞ –∏–ª–∏ –≤—ã–ø—å—é –±–æ–∫–∞–ª –ø–∏–≤–∞/–≤–∏–Ω–∞",
        emoji: "üò§",
      },
      { text: "–ú–Ω–µ —Ç–∞–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ –∑–Ω–∞–∫–æ–º–∞", emoji: "ü§∑‚Äç‚ôÄÔ∏è" },
    ],
  },
  {
    id: "lifestyle-3",
    category: "lifestyle",
    question:
      "–°–µ–≥–æ–¥–Ω—è —É –≤–∞—Å –º–Ω–æ–≥–æ –¥–µ–ª –ø–æ –¥–æ–º—É, –∫–∞–∫ –∏ –≤—á–µ—Ä–∞, –≤—ã —Å–∏–ª—å–Ω–æ —É—Å—Ç–∞–µ—Ç–µ –∏ –æ–±—ä–µ–∫—Ç–∏–≤–Ω–æ –Ω–µ–¥–æ—Å—ã–ø–∞–µ—Ç–µ. –í–æ —Å–∫–æ–ª—å–∫–æ –≤—ã —Å–µ–≥–æ–¥–Ω—è –ª—è–∂–µ—Ç–µ –∏ –ø—Ä–æ—Å–Ω–µ—Ç–µ—Å—å –∑–∞–≤—Ç—Ä–∞?",
    options: [
      {
        text: "–õ—è–≥—É –æ–∫–æ–ª–æ –ø–æ–ª—É–Ω–æ—á–∏ –∏–ª–∏ –¥–∞–∂–µ –ø–æ–∑–∂–µ, –ø–æ—Ç–æ–º—É —á—Ç–æ –Ω—É–∂–Ω–æ –¥–æ–¥–µ–ª–∞—Ç—å –≤—Å—ë –ø–æ –¥–æ–º—É/–ø–æ–∑–∞–±–æ—Ç–∏—Ç—å—Å—è –æ –¥–µ—Ç—è—Ö/–º—É–∂–µ, –∞ –ø—Ä–æ—Å–Ω—É—Å—å, –∫–∞–∫ –æ–±—ã—á–Ω–æ, –≤ 6-7 —É—Ç—Ä–∞ –∏–ª–∏ –¥–∞–∂–µ —Ä–∞–Ω—å—à–µ, —á—Ç–æ–±—ã –ø—Ä–∏–≥–æ—Ç–æ–≤–∏—Ç—å –∑–∞–≤—Ç—Ä–∞–∫",
        emoji: "üåô",
      },
      {
        text: "–õ—è–≥—É –ø–æ–∑–¥–Ω–æ, –∞ –ø—Ä–æ—Å–Ω—É—Å—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –∑–∞ –Ω–æ—á—å –æ—Ç —à—É–º–∞ –∏–ª–∏ —Ç—Ä–µ–≤–æ–∂–Ω—ã—Ö –º—ã—Å–ª–µ–π, –∏ –±—É–¥—É –≤–µ—Å—å –¥–µ–Ω—å —á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å —Å–µ–±—è —Ä–∞–∑–±–∏—Ç–æ–π –∏ —É—Å—Ç–∞–ª–æ–π",
        emoji: "üò¥",
      },
      {
        text: "–õ—è–≥—É –ø–æ–∑–¥–Ω–æ, –ø—Ä–æ—Å–ø–ª—é –¥–æ –æ–±–µ–¥–∞ –∏ –±—É–¥—É –≤–ø–æ–ø—ã—Ö–∞—Ö –ø—ã—Ç–∞—Ç—å—Å—è —É—Å–ø–µ—Ç—å –≤—ã–ø–æ–ª–Ω–∏—Ç—å –≤—Å–µ –¥–µ–ª–∞, –≤–µ—Å—å –¥–µ–Ω—å –±—É–¥—É –≤ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–∏ –∏ –Ω–µ —Å–º–æ–≥—É –Ω–æ—Ä–º–∞–ª—å–Ω–æ —Ä–∞—Å—Å–ª–∞–±–∏—Ç—å—Å—è",
        emoji: "üò∞",
      },
      {
        text: "–õ—è–≥—É —Ä–∞–Ω–æ, –ø—Ä–æ—Å–Ω—É—Å—å —Ä–∞–Ω–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ –Ω–∞–¥–æ –≤—Å–µ —É—Å–ø–µ—Ç—å, —Ç–∞–∫ –µ—â–µ –∏ –Ω–∞ —Ä–∞–±–æ—Ç—É –ø–æ–±–µ–∂–∞—Ç—å, —Å–∏–ª—å–Ω–æ —É—Å—Ç–∞–Ω—É –±—É–¥—É –ø–µ—Ä–µ–∂–∏–≤–∞—Ç—å –ø–æ—Ç–æ–º—É —á—Ç–æ –∏–∑-–∑–∞ —Ç–∞–∫–æ–≥–æ –≥—Ä–∞—Ñ–∏–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ —Å–µ–±—è –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç",
        emoji: "‚è∞",
      },
    ],
  },
  {
    id: "lifestyle-4",
    category: "lifestyle",
    question:
      "–í—ã –±—ã —Ö–æ—Ç–µ–ª–∏ –≤–µ—Å—Ç–∏ –±–æ–ª–µ–µ –∞–∫—Ç–∏–≤–Ω—ã–π –æ–±—Ä–∞–∑ –∂–∏–∑–Ω–∏. –ü–æ–¥—Ä—É–≥–∞ –∑–æ–≤–µ—Ç –≤–∞—Å –Ω–∞ –ø—Ä–æ–≥—É–ª–∫—É. –ò–∑-–∑–∞ –∫–∞–∫–∏—Ö –ø—Ä–∏—á–∏–Ω –≤—ã –æ—Ç–∫–∞–∂–µ—Ç–µ—Å—å?",
    options: [
      {
        text: "–£ –º–µ–Ω—è –Ω–æ–≥–∏ –∫–∞–∫ –±—É–¥—Ç–æ –Ω–∞–ª–∏—Ç—ã —Å–≤–∏–Ω—Ü–æ–º (—Ç—è–∂–µ—Å—Ç—å –∏ –æ—Ç–µ–∫–∏), –ø–æ—è—Å–Ω–∏—Ü–∞ –Ω–æ–µ—Ç, –∏ —è –Ω–∞—á–∏–Ω–∞—é –∑–∞–¥—ã—Ö–∞—Ç—å—Å—è —É–∂–µ —á–µ—Ä–µ–∑ –ø–∞—Ä—É –∫–≤–∞—Ä—Ç–∞–ª–æ–≤",
        emoji: "ü¶µ",
      },
      {
        text: "–Ø –æ—á–µ–Ω—å —É—Å—Ç–∞–ª–∞ –ø–æ—Å–ª–µ —Ä–∞–±–æ—Ç—ã –∏ –¥–æ–º–∞—à–Ω–∏—Ö —Ö–ª–æ–ø–æ—Ç, –Ω–µ—Ç —Å–∏–ª –Ω–∏ –Ω–∞ —á—Ç–æ, —Ö–æ—á–µ—Ç—Å—è –ø—Ä–æ—Å—Ç–æ –ø–æ–ª–µ–∂–∞—Ç—å, –∞ –Ω–µ –≥—É–ª—è—Ç—å",
        emoji: "üò¥",
      },
      {
        text: "–ú–Ω–µ –Ω–µ–ª–æ–≤–∫–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å—Å—è –≤ —Å–ø–æ—Ä—Ç–∏–≤–Ω–æ–π –æ–¥–µ–∂–¥–µ, —á—É–≤—Å—Ç–≤—É—é —Å–µ–±—è –Ω–µ—É–∫–ª—é–∂–µ–π, –¥–∞ –∏ –ø—Ä–æ—Å—Ç–æ –Ω–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è –≤—ã—Ö–æ–¥–∏—Ç—å –∏–∑ –¥–æ–º–∞ –≤ —Ç–∞–∫–æ–º –≤–∏–¥–µ",
        emoji: "üòî",
      },
      { text: "–Ø –ø–æ–π–¥—É —Å –Ω–µ–π –≤ –ª—é–±–æ–º —Å–ª—É—á–∞–µ, –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ç–æ –∫–∞–∫ –ø–æ—Ç–æ–º –±—É–¥—É —Å–µ–±—è —á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å", emoji: "üí™" },
    ],
  },
  // Previous Attempts Section (3 questions)
  {
    id: "attempts-1",
    category: "attempts",
    question:
      "–í–∞–º –≤—Å—Ç—Ä–µ—Ç–∏–ª–æ—Å—å –≤–∏–¥–µ–æ –≥–¥–µ —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –∏ –Ω–µ—Å–ª–æ–∂–Ω–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –¥–ª—è –ø–æ—Ö—É–¥–µ–Ω–∏—è, –∫–∞–∫ –¥–æ–ª–≥–æ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –≤—ã –±—É–¥–µ—Ç–µ –µ–π –∑–∞–Ω–∏–º–∞—Ç—å—Å—è?",
    options: [
      {
        text: "–ü–æ—Å–º–æ—Ç—Ä—é, –≤–¥–æ—Ö–Ω–æ–≤–ª—é—Å—å, —Å–¥–µ–ª–∞—é –ø–∞—Ä—É –ø–æ–ø—ã—Ç–æ–∫ –∏ –æ—Ç–ª–æ–∂—É ‚Äî —É—Å—Ç–∞–ª–æ—Å—Ç—å, –≤—Ä–µ–º—è –∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –±—ã—Å—Ç—Ä–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —Å–æ–±—å—é—Ç —Ç–µ–º–ø.",
        emoji: "üòî",
      },
      {
        text: "–ù–∞—á–Ω—É, –Ω–æ –±–æ–ª—å –≤ –∫–æ–ª–µ–Ω—è—Ö/—Å–ø–∏–Ω–µ –∏–ª–∏ –æ–¥—ã—à–∫–∞ –±—ã—Å—Ç—Ä–æ –æ—Å—Ç–∞–Ω–æ–≤—è—Ç ‚Äî –∑–Ω–∞—á–∏—Ç —Å–µ–π—á–∞—Å –Ω–∞–≥—Ä—É–∑–∫–∞ –≤—ã—à–µ –º–æ–∏—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π.",
        emoji: "üò∞",
      },
      {
        text: "–°–æ—Ö—Ä–∞–Ω—é '–Ω–∞ –ø–æ—Ç–æ–º': –±—É–¥—É –≥–æ–≤–æ—Ä–∏—Ç—å —Å–µ–±–µ '—Å –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫–∞', –Ω–æ —Ç–∞–∫ –∏ –Ω–µ –∑–∞–ø—É—â—É.",
        emoji: "üì±",
      },
      { text: "–°–º–æ–≥—É –∑–∞–Ω–∏–º–∞—Ç—å—Å—è —Å—Ç–∞–±–∏–ª—å–Ω–æ, –ø–æ–∫–∞ –Ω–µ —É–≤–∏–∂—É –ø–µ—Ä–≤—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã.", emoji: "üí™" },
    ],
  },
  {
    id: "attempts-2",
    category: "attempts",
    question:
      "–í—ã —Å–µ–ª–∏ –Ω–∞ –¥–∏–µ—Ç—É, –Ω–∞—à–ª–∏ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ –∏–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ –¥–∞–∂–µ –∑–∞–ø–ª–∞—Ç–∏–ª–∏ –∑–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é, –∫–∞–∫ —á–∞—Å—Ç–æ —É –≤–∞—Å –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç —Å—Ä—ã–≤—ã?",
    options: [
      {
        text: "–û—á–µ–Ω—å —á–∞—Å—Ç–æ: –ø–æ—Å–ª–µ –Ω–µ—Ä–≤–Ω–æ–≥–æ –∏–ª–∏ —É—Ç–æ–º–∏—Ç–µ–ª—å–Ω–æ–≥–æ –¥–Ω—è —Ç—è–Ω–µ—Ç –Ω–∞ '–∑–∞–ø—Ä–µ—â—ë–Ω–Ω–æ–µ', –∞ –ø–æ—Ç–æ–º –ø–æ—è–≤–ª—è—é—Ç—Å—è —á—É–≤—Å—Ç–≤–æ –≤–∏–Ω—ã –∏ —Ç—è–∂–µ—Å—Ç—å.",
        emoji: "üòî",
      },
      {
        text: "–î–µ—Ä–∂—É—Å—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π –∏–ª–∏ –Ω–µ–¥–µ–ª—é, –∞ –∑–∞—Ç–µ–º –Ω–∞ –≤—ã—Ö–æ–¥–Ω—ã—Ö —É—Ö–æ–∂—É –≤ –ª—é–±–∏–º—ã–µ –±–ª—é–¥–∞ (—Å–µ–≤–∏—á–µ, –ª–æ–º–æ —Å–∞–ª—å—Ç–∞–¥–æ, —Å–ª–∞–¥–æ—Å—Ç–∏) –∏ —Å–±—Ä–∞—Å—ã–≤–∞—é –Ω–∞—Å—Ç—Ä–æ–π.",
        emoji: "üçΩÔ∏è",
      },
      {
        text: "–°–Ω–∞—á–∞–ª–∞ —Å—Ç–∞—Ä–∞—é—Å—å, –Ω–æ –µ—Å–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–µ –±—ã—Å—Ç—Ä—ã–π –∏–ª–∏ –æ–¥–Ω–æ–æ–±—Ä–∞–∑–∏–µ –Ω–∞–¥–æ–µ–ª–æ ‚Äî –ø—Ä–æ—Å—Ç–æ –ø—Ä–µ–∫—Ä–∞—â–∞—é.",
        emoji: "ü§∑‚Äç‚ôÄÔ∏è",
      },
      { text: "–£–¥–µ—Ä–∂–∏–≤–∞—é—Å—å –±–µ–∑ —Å—Ä—ã–≤–æ–≤.", emoji: "üí™" },
    ],
  },
  {
    id: "attempts-3",
    category: "attempts",
    question:
      "–£ –≤–∞—Å –Ω–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ö–æ–¥–∏—Ç—å –≤ —Å–ø–æ—Ä—Ç–∑–∞–ª –∏ –≤—ã –ø—Ä–æ–±—É–µ—Ç–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã, —á—Ç–æ –ø–æ –≤–∞—à–µ–º—É –º–Ω–µ–Ω–∏—é –ø–æ-–Ω–∞—Å—Ç–æ—è—â–µ–º—É –ø–æ–º–æ–≥–ª–æ –±—ã –≤–∞–º –ø–æ—Ö—É–¥–µ—Ç—å?",
    options: [
      {
        text: "–ß—Ç–æ-—Ç–æ, —á—Ç–æ –ø–æ–º–æ–≥–ª–æ –±—ã –±–µ–∑ –±–æ–ª—å—à–∏—Ö —É—Å–∏–ª–∏–π ‚Äî –≤–æ–∑–º–æ–∂–Ω–æ, —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∫–∞–ø—Å—É–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ —É—Å–∫–æ—Ä—è—é—Ç –º–µ—Ç–∞–±–æ–ª–∏–∑–º, –∏–ª–∏ –ª–µ–≥–∫–∏–π –Ω–∞–ø–∏—Ç–æ–∫, –∫–æ—Ç–æ—Ä—ã–π —Å–∂–∏–≥–∞–µ—Ç –∂–∏—Ä",
        emoji: "üíä",
      },
      {
        text: "–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –ø–æ–º–æ—â—å, –Ω–æ –Ω–µ –≤ —Å–ø–æ—Ä—Ç–∑–∞–ª–µ, –∞, –≤–æ–∑–º–æ–∂–Ω–æ, —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω –ø–∏—Ç–∞–Ω–∏—è, –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫ –º–æ–µ–π –∂–∏–∑–Ω–∏, –∏–ª–∏ —á—Ç–æ-—Ç–æ, —á—Ç–æ –¥–∞—Å—Ç —ç–Ω–µ—Ä–≥–∏—é –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏",
        emoji: "üìã",
      },
      {
        text: "–Ø –ø–æ–Ω–∏–º–∞—é, —á—Ç–æ –Ω—É–∂–Ω–æ –º–µ–Ω—å—à–µ –µ—Å—Ç—å, –±–æ–ª—å—à–µ –¥–≤–∏–≥–∞—Ç—å—Å—è –∏ –ª—É—á—à–µ —Å–ø–∞—Ç—å, –Ω–æ –Ω–µ –∑–Ω–∞—é, —Å —á–µ–≥–æ –Ω–∞—á–∞—Ç—å –∏ –∫–∞–∫ –≤—Å—ë —ç—Ç–æ —Å–æ–≤–º–µ—Å—Ç–∏—Ç—å —Å –º–æ–µ–π –∂–∏–∑–Ω—å—é",
        emoji: "ü§î",
      },
      {
        text: "–ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ —É –º–µ–Ω—è –≤—Å–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ö–æ—Ä–æ—à–æ, —è –ø—Ä–æ—Å—Ç–æ —Ö–æ—á—É —É—Å–ª—ã—à–∞—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∫ –º–æ–µ–º—É –æ–±—Ä–∞–∑—É –∂–∏–∑–Ω–∏",
        emoji: "‚ú®",
      },
    ],
  },
]

const reassuranceMessages: Record<string, Record<string, string>> = {
  "attempts-1": {
    "–ü–æ—Å–º–æ—Ç—Ä—é, –≤–¥–æ—Ö–Ω–æ–≤–ª—é—Å—å, —Å–¥–µ–ª–∞—é –ø–∞—Ä—É –ø–æ–ø—ã—Ç–æ–∫ –∏ –æ—Ç–ª–æ–∂—É ‚Äî —É—Å—Ç–∞–ª–æ—Å—Ç—å, –≤—Ä–µ–º—è –∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –±—ã—Å—Ç—Ä–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —Å–æ–±—å—é—Ç —Ç–µ–º–ø.":
      "–≠—Ç–æ –∞–±—Å–æ–ª—é—Ç–Ω–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ! –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –∂–µ–Ω—â–∏–Ω —Å—Ç–∞–ª–∫–∏–≤–∞—é—Ç—Å—è —Å —Ç–µ–º–∏ –∂–µ —Ç—Ä—É–¥–Ω–æ—Å—Ç—è–º–∏. –ì–ª–∞–≤–Ω–æ–µ ‚Äî –Ω–∞–π—Ç–∏ –ø–æ–¥—Ö–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–¥–æ–π–¥–µ—Ç –∏–º–µ–Ω–Ω–æ –≤–∞–º.",
    "–ù–∞—á–Ω—É, –Ω–æ –±–æ–ª—å –≤ –∫–æ–ª–µ–Ω—è—Ö/—Å–ø–∏–Ω–µ –∏–ª–∏ –æ–¥—ã—à–∫–∞ –±—ã—Å—Ç—Ä–æ –æ—Å—Ç–∞–Ω–æ–≤—è—Ç ‚Äî –∑–Ω–∞—á–∏—Ç —Å–µ–π—á–∞—Å –Ω–∞–≥—Ä—É–∑–∫–∞ –≤—ã—à–µ –º–æ–∏—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π.":
      "–í–∞—à–µ —Ç–µ–ª–æ –ø–æ–¥–∞–µ—Ç –≤–∞–∂–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã. –ï—Å—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–æ —â–∞–¥—è—â–∏—Ö —Å–ø–æ—Å–æ–±–æ–≤ –Ω–∞—á–∞—Ç—å –¥–≤–∏–∂–µ–Ω–∏–µ –±–µ–∑ –±–æ–ª–∏ –∏ –¥–∏—Å–∫–æ–º—Ñ–æ—Ä—Ç–∞.",
    "–°–æ—Ö—Ä–∞–Ω—é '–Ω–∞ –ø–æ—Ç–æ–º': –±—É–¥—É –≥–æ–≤–æ—Ä–∏—Ç—å —Å–µ–±–µ '—Å –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫–∞', –Ω–æ —Ç–∞–∫ –∏ –Ω–µ –∑–∞–ø—É—â—É.":
      "–û—Ç–∫–ª–∞–¥—ã–≤–∞–Ω–∏–µ ‚Äî —ç—Ç–æ –∑–∞—â–∏—Ç–Ω–∞—è —Ä–µ–∞–∫—Ü–∏—è –ø—Å–∏—Ö–∏–∫–∏. –ú—ã –ø–æ–º–æ–∂–µ–º –Ω–∞–π—Ç–∏ —Å–ø–æ—Å–æ–± –Ω–∞—á–∞—Ç—å –±–µ–∑ —Å—Ç—Ä–µ—Å—Å–∞ –∏ —Å–∞–º–æ–∫—Ä–∏—Ç–∏–∫–∏.",
  },
  "attempts-2": {
    "–û—á–µ–Ω—å —á–∞—Å—Ç–æ: –ø–æ—Å–ª–µ –Ω–µ—Ä–≤–Ω–æ–≥–æ –∏–ª–∏ —É—Ç–æ–º–∏—Ç–µ–ª—å–Ω–æ–≥–æ –¥–Ω—è —Ç—è–Ω–µ—Ç –Ω–∞ '–∑–∞–ø—Ä–µ—â—ë–Ω–Ω–æ–µ', –∞ –ø–æ—Ç–æ–º –ø–æ—è–≤–ª—è—é—Ç—Å—è —á—É–≤—Å—Ç–≤–æ –≤–∏–Ω—ã –∏ —Ç—è–∂–µ—Å—Ç—å.":
      "–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ø–µ—Ä–µ–µ–¥–∞–Ω–∏–µ ‚Äî —ç—Ç–æ –Ω–µ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ–∫ —Å–∏–ª—ã –≤–æ–ª–∏, –∞ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–∞—è —Ä–µ–∞–∫—Ü–∏—è –Ω–∞ —Å—Ç—Ä–µ—Å—Å. –≠—Ç–æ –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –ø–æ–¥—Ö–æ–¥–æ–º.",
    "–î–µ—Ä–∂—É—Å—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π –∏–ª–∏ –Ω–µ–¥–µ–ª—é, –∞ –∑–∞—Ç–µ–º –Ω–∞ –≤—ã—Ö–æ–¥–Ω—ã—Ö —É—Ö–æ–∂—É –≤ –ª—é–±–∏–º—ã–µ –±–ª—é–¥–∞ (—Å–µ–≤–∏—á–µ, –ª–æ–º–æ —Å–∞–ª—å—Ç–∞–¥–æ, —Å–ª–∞–¥–æ—Å—Ç–∏) –∏ —Å–±—Ä–∞—Å—ã–≤–∞—é –Ω–∞—Å—Ç—Ä–æ–π.":
      "–¶–∏–∫–ª –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –∏ —Å—Ä—ã–≤–æ–≤ –∑–Ω–∞–∫–æ–º –º–Ω–æ–≥–∏–º. –°–µ–∫—Ä–µ—Ç –≤ —Ç–æ–º, —á—Ç–æ–±—ã –Ω–∞–π—Ç–∏ –±–∞–ª–∞–Ω—Å, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º –ª—é–±–∏–º—ã–µ –±–ª—é–¥–∞ –Ω–µ —Å—Ç–∞–Ω—É—Ç –∑–∞–ø—Ä–µ—Ç–Ω—ã–º–∏.",
    "–°–Ω–∞—á–∞–ª–∞ —Å—Ç–∞—Ä–∞—é—Å—å, –Ω–æ –µ—Å–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–µ –±—ã—Å—Ç—Ä—ã–π –∏–ª–∏ –æ–¥–Ω–æ–æ–±—Ä–∞–∑–∏–µ –Ω–∞–¥–æ–µ–ª–æ ‚Äî –ø—Ä–æ—Å—Ç–æ –ø—Ä–µ–∫—Ä–∞—â–∞—é.":
      "–ú–æ—Ç–∏–≤–∞—Ü–∏—è —É–≥–∞—Å–∞–µ—Ç, –∫–æ–≥–¥–∞ –ø–æ–¥—Ö–æ–¥ –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –ª–∏—á–Ω–æ –≤–∞–º. –í–∞–∂–Ω–æ –Ω–∞–π—Ç–∏ —Å–∏—Å—Ç–µ–º—É, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ.",
  },
}

const miniQuestions = [
  {
    id: "pregnancy",
    type: "radio",
    title: "Are you pregnant or breastfeeding?",
    options: [
      "No / not planning in the next 6 months",
      "Pregnancy ‚Äî 1st trimester",
      "Pregnancy ‚Äî 2nd‚Äì3rd trimester",
      "Breastfeeding < 6 months",
      "Breastfeeding > 6 months",
    ],
  },
  {
    id: "diet",
    type: "checkbox",
    title: "Which of these describes your diet?",
    options: ["I am vegetarian", "I avoid lactose", "I avoid gluten", "None of the above"],
  },
  {
    id: "meds",
    type: "radio",
    title: "Do you take any regular medication?",
    options: [
      "None",
      "Hormonal contraceptives",
      "Thyroid medication",
      "Antidepressants / anxiolytics",
      "Corticosteroids",
      "Other ‚Äî I'll specify later",
    ],
  },
  {
    id: "menopause",
    type: "radio",
    title: "Are you in menopause?",
    options: ["No", "Perimenopause (symptoms already present)", "Postmenopause (no periods for > 12 months)"],
  },
  {
    id: "conditions",
    type: "checkbox",
    title: "Do you have any medical conditions that can affect weight?",
    options: ["Hypothyroidism", "PCOS", "Prediabetes / type 2 diabetes", "High blood pressure", "None of the above"],
  },
]

interface AnswerStats {
  all: string[]
  counts: Record<"a" | "b" | "c" | "d", number>
  pct: Record<"a" | "b" | "c" | "d", number>
  block1: string[]
  block2: string[]
  block3: string[]
}

function buildStats(codeArray: string[]): AnswerStats {
  const counts = { a: 0, b: 0, c: 0, d: 0 }
  codeArray.forEach((l) => {
    if (counts[l as "a" | "b" | "c" | "d"] !== undefined) counts[l as "a" | "b" | "c" | "d"]++
  })
  const total = codeArray.length || 1
  const pct = { a: counts.a / total, b: counts.b / total, c: counts.c / total, d: counts.d / total }
  return {
    all: codeArray,
    counts,
    pct,
    block1: codeArray.slice(0, 3),
    block2: codeArray.slice(3, 7),
    block3: codeArray.slice(7, 10),
  }
}

const explanationTexts = {
  text_90a: `–í–∞–º –∑–Ω–∞–∫–æ–º–∞ —Å–∏—Ç—É–∞—Ü–∏—è, –∫–æ–≥–¥–∞ –≤–∫—É—Å–Ω–∞—è –µ–¥–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º —É—Ç–µ—à–µ–Ω–∏–µ–º –ø–æ—Å–ª–µ —Ç—Ä—É–¥–Ω–æ–≥–æ –¥–Ω—è, –∞ –∑–∞–±–æ—Ç–∞ –æ —Å–µ–±–µ –æ—Ç–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –ø–æ—Ç–æ–º? –í—ã –Ω–µ –æ–¥–∏–Ω–æ–∫–∏. –ú–∏–ª–ª–∏–æ–Ω—ã –∂–µ–Ω—â–∏–Ω –≤–∞—à–µ–≥–æ –≤–æ–∑—Ä–∞—Å—Ç–∞ –≤ –ü–µ—Ä—É –∂–∏–≤—É—Ç –≤ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–º –≤–æ–¥–æ–≤–æ—Ä–æ—Ç–µ –¥–µ–ª, –≥–¥–µ –Ω–∞ —Å–µ–±—è –ø—Ä–æ—Å—Ç–æ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –Ω–∏ —Å–∏–ª, –Ω–∏ –≤—Ä–µ–º–µ–Ω–∏. –û—Ä–≥–∞–Ω–∏–∑–º, –ø—ã—Ç–∞—è—Å—å —Å–ø—Ä–∞–≤–∏—Ç—å—Å—è —Å–æ —Å—Ç—Ä–µ—Å—Å–æ–º –∏ –Ω–µ–¥–æ—Å—ã–ø–∞–Ω–∏–µ–º, —Ç—Ä–µ–±—É–µ—Ç –±—ã—Å—Ç—Ä–æ–π —ç–Ω–µ—Ä–≥–∏–∏, –∞ —ç—Ç–æ —á–∞—Å—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –≤—ã–±–æ—Ä—É –≤—ã—Å–æ–∫–æ–∫–∞–ª–æ—Ä–∏–π–Ω–æ–π, –Ω–æ –ø—É—Å—Ç–æ–π –µ–¥—ã. –û—Ç—Å—é–¥–∞ –∏ –ø—Ä–æ–±–ª–µ–º—ã —Å–æ –∑–¥–æ—Ä–æ–≤—å–µ–º, –∏ –æ—â—É—â–µ–Ω–∏–µ, —á—Ç–æ —Ç–µ–ª–æ –≤–∞—Å –ø–æ–¥–≤–æ–¥–∏—Ç. –í—ã –ø—ã—Ç–∞–µ—Ç–µ—Å—å —á—Ç–æ-—Ç–æ –∏–∑–º–µ–Ω–∏—Ç—å, –Ω–æ —Ü–∏–∫–ª—ã —Å—Ä—ã–≤–æ–≤ –∏ —É—Å—Ç–∞–ª–æ—Å—Ç–∏ –≤—ã–±–∏–≤–∞—é—Ç –∏–∑ –∫–æ–ª–µ–∏. –≠—Ç–æ –Ω–µ –≤–∞—à–∞ —Å–ª–∞–±–æ—Å—Ç—å, –∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ç–æ–≥–æ, —á—Ç–æ —Ç–µ–ª–æ –∏ –º–æ–∑–≥ –∏—â—É—Ç –∫—Ä–∞—Ç—á–∞–π—à–∏–π –ø—É—Ç—å –∫ "–∫–æ–º—Ñ–æ—Ä—Ç—É" –≤ —É—Å–ª–æ–≤–∏—è—Ö –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è. –ú–Ω–æ–≥–∏–µ –∏—â—É—Ç –±—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ, –ø–æ—Ç–æ–º—É —á—Ç–æ —É—Å—Ç–∞–ª–∏ –æ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã—Ö –±–µ–∑—É—Å–ø–µ—à–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫.`,
  text_90b: `–ö–∞–∂–µ—Ç—Å—è, –≤—ã —Ö–æ—Ä–æ—à–æ –∑–Ω–∞–∫–æ–º—ã —Å —Ç–µ–º, –∫–∞–∫ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–∏—Ç–∞–Ω–∏–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –≤–∞—à–µ —Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏–µ, –∏ —É–∂–µ —á—É–≤—Å—Ç–≤—É–µ—Ç–µ –Ω–∞ —Å–µ–±–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è –∏–∑–±—ã—Ç–æ—á–Ω–æ–≥–æ –≤–µ—Å–∞ ‚Äì –±–æ–ª–∏, –æ—Ç–µ–∫–∏, –æ–¥—ã—à–∫—É. –í—ã –ø–æ–Ω–∏–º–∞–µ—Ç–µ, —á—Ç–æ –º–Ω–æ–≥–∏–µ –∏–∑ –≤–∞—à–∏—Ö –ø—Ä–∏–≤—ã—á–µ–∫ –Ω–µ –∏–¥–µ–∞–ª—å–Ω—ã, –Ω–æ —Ä–∞–∑–æ—Ä–≤–∞—Ç—å —ç—Ç–æ—Ç –∫—Ä—É–≥ –±—ã–≤–∞–µ—Ç –æ—á–µ–Ω—å —Ç—Ä—É–¥–Ω–æ. –í–æ–∑–º–æ–∂–Ω–æ, –≤—ã –æ—Å–æ–∑–Ω–∞–µ—Ç–µ, —á—Ç–æ –Ω—É–∂–µ–Ω –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –ø–æ–¥—Ö–æ–¥, –Ω–æ –Ω–µ –∑–Ω–∞–µ—Ç–µ, –∫–∞–∫ –µ–≥–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤ —Å–≤–æ–µ–π –Ω–∞—Å—ã—â–µ–Ω–Ω–æ–π –∂–∏–∑–Ω–∏, –≥–¥–µ —Å—Ç—Ä–µ—Å—Å –∏ —É—Å—Ç–∞–ª–æ—Å—Ç—å –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –±–µ—Ä—É—Ç –≤–µ—Ä—Ö.`,
  text_90c: `–ö–∞–∂–µ—Ç—Å—è, –≤—ã —Å—Ç—Ä–µ–º–∏—Ç–µ—Å—å –∫ –±–æ–ª–µ–µ –∑–¥–æ—Ä–æ–≤–æ–º—É –æ–±—Ä–∞–∑—É –∂–∏–∑–Ω–∏, –Ω–æ —Å—Ç–∞–ª–∫–∏–≤–∞–µ—Ç–µ—Å—å —Å —Å–µ—Ä—å—ë–∑–Ω—ã–º–∏ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –¥–∞—é—Ç –¥–≤–∏–≥–∞—Ç—å—Å—è –≤–ø–µ—Ä—ë–¥. –í—ã–±–∏—Ä–∞—è —Å–ª–∞–¥–∫–æ–µ –∏–ª–∏ —Ñ–∞—Å—Ç—Ñ—É–¥, –≤—ã –∏—â–µ—Ç–µ –±—ã—Å—Ç—Ä—ã–π —Å–ø–æ—Å–æ–± –ø–æ–¥–Ω—è—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ ‚Äî –Ω–æ —ç—Ç–æ –ª–∏—à—å –≤—Ä–µ–º–µ–Ω–Ω–æ. –ß—É–≤—Å—Ç–≤–æ —É—Å—Ç–∞–ª–æ—Å—Ç–∏ –∏ –Ω–µ–¥–æ—Å—ã–ø, —á–∞—Å—Ç—ã–µ –±–æ–ª–∏ –≤ —Å–ø–∏–Ω–µ –∏ —Å—É—Å—Ç–∞–≤–∞—Ö ‚Äî —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ –≤–æ–∑—Ä–∞—Å—Ç, –∞ —Å–∏–≥–Ω–∞–ª—ã —Ç–µ–ª–∞, —á—Ç–æ —á—Ç–æ-—Ç–æ –∏–¥—ë—Ç –Ω–µ —Ç–∞–∫. –ö–æ–≥–¥–∞ —Å–∏–ª –Ω–µ—Ç —Å–æ–≤—Å–µ–º, –∞ —Å–ø–æ—Ä—Ç –∫–∞–∂–µ—Ç—Å—è –∏—Å–ø—ã—Ç–∞–Ω–∏–µ–º, –ª—é–¥–∏ –æ—Ç–∫–ª–∞–¥—ã–≤–∞—é—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å, –∞ –ø–æ–ø—ã—Ç–∫–∏ –¥–∏–µ—Ç –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—Ç—Å—è —Å—Ä—ã–≤–∞–º–∏. –≠—Ç–æ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞: –æ—Ä–≥–∞–Ω–∏–∑–º –∏—Å—Ç–æ—â—ë–Ω, –∞ —Å—Ç–∞—Ä—ã–µ –ø—Ä–∏–≤—ã—á–∫–∏, –ø–æ–º–æ–≥–∞–≤—à–∏–µ —Å–ø—Ä–∞–≤–ª—è—Ç—å—Å—è —Å–æ —Å—Ç—Ä–µ—Å—Å–æ–º, –ø—Ä–µ–≤—Ä–∞—Ç–∏–ª–∏—Å—å –≤ –ª–æ–≤—É—à–∫—É.`,
  text_80d: `–ü–æ—Ö–æ–∂–µ, –≤—ã –æ—Å–æ–∑–Ω–∞—ë—Ç–µ –≤–∞–∂–Ω–æ—Å—Ç—å –∑–¥–æ—Ä–æ–≤–æ–≥–æ –ø–∏—Ç–∞–Ω–∏—è –∏ —Å—Ç–∞—Ä–∞–µ—Ç–µ—Å—å –ø—Ä–∏–¥–µ—Ä–∂–∏–≤–∞—Ç—å—Å—è –µ–≥–æ, –Ω–æ –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω–∞—è –∂–∏–∑–Ω—å –≤–Ω–æ—Å–∏—Ç —Å–≤–æ–∏ –∫–æ—Ä—Ä–µ–∫—Ç–∏–≤—ã. –û—Ç—ÅÔøΩÔøΩ—Ç—Å—Ç–≤–∏–µ —Å–µ—Ä—å—ë–∑–Ω—ã—Ö –¥–∏–∞–≥–Ω–æ–∑–æ–≤ –æ–±—ä—è—Å–Ω—è–µ—Ç—Å—è —Ç–µ–º, —á—Ç–æ –≤—ã –µ—â—ë –Ω–µ –¥–æ–≤–µ–ª–∏ —Å–µ–±—è –¥–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –Ω–æ —É–∂–µ –æ—â—É—â–∞–µ—Ç–µ —É—Å—Ç–∞–ª–æ—Å—Ç—å, –æ–¥—ã—à–∫—É –∏ —Å–Ω–∏–∂–µ–Ω–∏–µ —ç–Ω–µ—Ä–≥–∏–∏. –°—Ç—Ä–µ—Å—Å –∏ –Ω–µ–¥–æ—Å—ã–ø, –≤—ã–∑–≤–∞–Ω–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–æ–º –∏ –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç—è–º–∏, –ø—Ä–∏–≤–æ–¥—è—Ç –∫ —Ä–∞–∑–¥—Ä–∞–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –Ω–µ–∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–º—É –ø–µ—Ä–µ–µ–¥–∞–Ω–∏—é. –ú–Ω–æ–≥–∏–µ –∂–µ–Ω—â–∏–Ω—ã –≤ –≤–∞—à–µ–π —Å–∏—Ç—É–∞—Ü–∏–∏ —Å—Ç–µ—Å–Ω—è—é—Ç—Å—è –∏–ª–∏ –Ω–µ –Ω–∞—Ö–æ–¥—è—Ç –≤ —Å–µ–±–µ —Å–∏–ª –¥–ª—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏. –í–æ–∑–Ω–∏–∫–∞–µ—Ç –∑–∞–º–∫–Ω—É—Ç—ã–π –∫—Ä—É–≥: –≤—ã –∑–Ω–∞–µ—Ç–µ, —á—Ç–æ –Ω—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å, –Ω–æ –Ω–∞–π—Ç–∏ —É—Å—Ç–æ–π—á–∏–≤—É—é –º–æ—Ç–∏–≤–∞—Ü–∏—é —Ç—Ä—É–¥–Ω–æ, –æ—Å–æ–±–µ–Ω–Ω–æ –∫–æ–≥–¥–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–∏—Ö–æ–¥—è—Ç –º–µ–¥–ª–µ–Ω–Ω–æ.`,
  text_95d: `–í—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏–µ —á–µ–ª–æ–≤–µ–∫–∞, –∫–æ—Ç–æ—Ä—ã–π —Ö–æ—Ä–æ—à–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç —Å–≤–æ—é –∂–∏–∑–Ω—å –∏ –∑–¥–æ—Ä–æ–≤—å–µ. –ù–µ—Ç —Å–µ—Ä—å—ë–∑–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º —Å –≤–µ—Å–æ–º –∏–ª–∏ —Å–æ–ø—É—Ç—Å—Ç–≤—É—é—â–∏–º–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏, –≤—ã —É–º–µ–µ—Ç–µ —É–ø—Ä–∞–≤–ª—è—Ç—å —Å—Ç—Ä–µ—Å—Å–æ–º –∏ –Ω–∞—Ö–æ–¥–∏—Ç—å –≤—Ä–µ–º—è –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏. –í–∞—à–∏ –ø–∏—â–µ–≤—ã–µ –ø—Ä–∏–≤—ã—á–∫–∏ ‚Äî –æ—Å–æ–∑–Ω–∞–Ω–Ω—ã–π –≤—ã–±–æ—Ä. –í—ã –ø—Ä–∏–¥–µ—Ä–∂–∏–≤–∞–µ—Ç–µ—Å—å —Ü–µ–ª–µ–π –∏ –Ω–µ –ø–æ–¥–¥–∞—ë—Ç–µ—Å—å —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã–º –∏—Å–∫—É—à–µ–Ω–∏—è–º. –≠—Ç–æ –ø—Ä–∏–º–µ—Ä –¥–ª—è –ø–æ–¥—Ä–∞–∂–∞–Ω–∏—è. –ù–æ, –≤–æ–∑–º–æ–∂–Ω–æ, –≤–∞–º –≤—Å—ë –∂–µ —á–µ–≥–æ-—Ç–æ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç ‚Äî –±—ã—Å—Ç—Ä–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤ —É—Å–ª–æ–≤–∏—è—Ö, –µ—Å–ª–∏ –∂–∏–∑–Ω—å —Ä–µ–∑–∫–æ —Å–º–µ–Ω–∏—Ç —Ç–µ–º–ø, –∏–ª–∏ –≥–∏–±–∫–æ–≥–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –Ω–∞ –±—É–¥—É—â–µ–µ.`,
  text_90a_b_end: `–í–∞—à–∏ –æ—Ç–≤–µ—Ç—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç, —á—Ç–æ –≤—ã –æ–∫–∞–∑–∞–ª–∏—Å—å –≤ —Å–ª–æ–∂–Ω–æ–º –∑–∞–º–∫–Ω—É—Ç–æ–º –∫—Ä—É–≥—É, –≥–¥–µ –ø–∏—Ç–∞–Ω–∏–µ —É—Å—É–≥—É–±–ª—è–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å–æ –∑–¥–æ—Ä–æ–≤—å–µ–º, –∞ —Å—Ç—Ä–µ—Å—Å –∏ —É—Å—Ç–∞–ª–æ—Å—Ç—å –≤–µ–¥—É—Ç –∫ –µ—â—ë –±–æ–ª—å—à–µ–º—É –ø–µ—Ä–µ–µ–¥–∞–Ω–∏—é. –í—ã, –≤–µ—Ä–æ—è—Ç–Ω–æ, –ø—ã—Ç–∞–ª–∏—Å—å –¥–∏–µ—Ç—ã, –Ω–æ —Å–∏–ª—å–Ω—ã–µ –ø—Ä–∏–≤—ã—á–∫–∏ –∏ "—Å–∫—Ä—ã—Ç—ã–µ" —Å–æ–±–ª–∞–∑–Ω—ã –¥–æ–º–∞ –ø—Ä–∏–≤–æ–¥—è—Ç –∫ —Å—Ä—ã–≤–∞–º. –≠—Ç–æ —Ç–∏–ø–∏—á–Ω–∞—è —Å–∏—Ç—É–∞—Ü–∏—è, –∫–æ–≥–¥–∞ —á–µ–ª–æ–≤–µ–∫ —á—É–≤—Å—Ç–≤—É–µ—Ç —Å–µ–±—è –±–µ—Å—Å–∏–ª—å–Ω—ã–º –ø–µ—Ä–µ–¥ —Ç—è–≥–æ–π –∫ –µ–¥–µ –∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ–º —ç–Ω–µ—Ä–≥–∏–∏ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π.`,
  text_only_ab: `–í–∞—à–∏ –æ—Ç–≤–µ—Ç—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç, —á—Ç–æ –µ–¥–∞ ‚Äî –≤–∞–∂–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —Å–Ω—è—Ç–∏—è –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è. –í—ã —É–∂–µ –æ—â—É—â–∞–µ—Ç–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è: –æ—Ç–µ–∫–∏, –±–æ–ª–∏, –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–µ—Ä–¥—Ü–µ –∏–ª–∏ –¥—ã—Ö–∞–Ω–∏–µ. –ü–æ–ø—ã—Ç–∫–∏ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –ø–∏—Ç–∞–Ω–∏–µ —á–∞—Å—Ç–æ –ø—Ä–µ—Ä—ã–≤–∞—é—Ç—Å—è –∏–∑‚Äë–∑–∞ —É—Å—Ç–∞–ª–æ—Å—Ç–∏ –∏ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏ –≤ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–º –∫–æ–º—Ñ–æ—Ä—Ç–µ. –≠—Ç–æ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω–æ, –∫–æ–≥–¥–∞ —ç–Ω–µ—Ä–≥–∏—è –Ω–∞ –∏—Å—Ö–æ–¥–µ, –∞ –º–æ–∑–≥ –∏—â–µ—Ç –±—ã—Å—Ç—Ä—ã–π –Ω–∞–≥—Ä–∞–¥–Ω—ã–π —Å–∏–≥–Ω–∞–ª.`,
  text_c_then_ab: `–í—ã —Å—Ç–∞—Ä–∞–µ—Ç–µ—Å—å –ø–∏—Ç–∞—Ç—å—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏, –≤–æ–∑–º–æ–∂–Ω–æ, –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –∞–∫—Ç–∏–≤–Ω—ã, –Ω–æ —Ö—Ä–æ–Ω–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–ª–æ—Å—Ç—å –∏ –Ω–µ–¥–æ—Å—ã–ø –ø–æ–¥—Ä—ã–≤–∞—é—Ç —É—Å–∏–ª–∏—è. –í—ã –∑–Ω–∞–µ—Ç–µ "–∫–∞–∫ –Ω–∞–¥–æ", –Ω–æ —Ä–µ–∂–∏–º –¥–Ω—è –∏ —Å—Ç—Ä–µ—Å—Å –º–µ—à–∞—é—Ç –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–µ. –≠—Ç–æ –ø–æ—Ö–æ–∂–µ –Ω–∞ —Å–∏—Ç—É–∞—Ü–∏—é, –∫–æ–≥–¥–∞ —á–µ–ª–æ–≤–µ–∫ –≥–æ—Ç–æ–≤ –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º, –Ω–æ –≤–Ω–µ—à–Ω–∏–µ –æ–±—Å—Ç–æ—è—Ç–µ–ª—å—Å—Ç–≤–∞ –∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ –∏—Å—Ç–æ—â–µ–Ω–∏–µ –º–µ—à–∞—é—Ç –¥–æ–≤–µ—Å—Ç–∏ –Ω–∞—á–∞—Ç–æ–µ –¥–æ –∫–æ–Ω—Ü–∞. –ú–Ω–æ–≥–∏–µ –∂–µ–Ω—â–∏–Ω—ã –≤ –≤–∞—à–µ–º –≤–æ–∑—Ä–∞—Å—Ç–µ —á–µ—Ä–µ–∑ —ç—Ç–æ –ø—Ä–æ—Ö–æ–¥—è—Ç, –≤—Ä–µ–º–µ–Ω–Ω–æ —Ç–µ—Ä—è—è –≤–µ—Ä—É –≤ —Å–≤–æ–∏ —Å–∏–ª—ã.`,
  text_mix_dc_a: `–ü–æ—Ö–æ–∂–µ, –≤—ã –∞–∫—Ç–∏–≤–Ω—ã–π –∏ –∑–∞–Ω—è—Ç—ã–π —á–µ–ª–æ–≤–µ–∫, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å –ø—Ä–∏—ë–º—ã –ø–∏—â–∏ –∏–ª–∏ –ø–∏—Ç–∞—Ç—å—Å—è –Ω–µ—Ä–µ–≥—É–ª—è—Ä–Ω–æ. –ü–æ—Å—Ç–æ—è–Ω–Ω–∞—è –≥–æ–Ω–∫–∞ –∏ —Å—Ç—Ä–µ—Å—Å –ø—Ä–∏–≤–æ–¥—è—Ç –∫ —Ç–æ–º—É, —á—Ç–æ –≤—ã –∫–æ–º–ø–µ–Ω—Å–∏—Ä—É–µ—Ç–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –µ–¥–æ–π. –ü–æ–∫–∞ –Ω–µ—Ç —è–≤–Ω—ã—Ö —Ç—è–∂—ë–ª—ã—Ö –ø—Ä–æ–±–ª–µ–º, –Ω–æ –≤—ã —á—É–≤—Å—Ç–≤—É–µ—Ç–µ, —á—Ç–æ —Ç–∞–∫–æ–π —Ç–µ–º–ø –≤—ã–º–∞—Ç—ã–≤–∞–µ—Ç, –∏ –∏—â–µ—Ç–µ –ø—Ä–æ—Å—Ç–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Ñ–æ—Ä–º—ã. –≠—Ç–æ —Ç–∏–ø–∏—á–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π –¥–ª—è —Ç–µ—Ö, –∫—Ç–æ —Å—Ç–∞—Ä–∞–µ—Ç—Å—è —É—Å–ø–µ—Ç—å –≤—Å—ë –∏ –Ω–µ —Ö–æ—á–µ—Ç —Ç—Ä–∞—Ç–∏—Ç—å —á–∞—Å—ã –Ω–∞ —Å–ª–æ–∂–Ω—ã–µ –º–µ—Ç–æ–¥–∏–∫–∏ –ø–æ—Ö—É–¥–µ–Ω–∏—è.`,
  text_fallback: `–£ –≤–∞—Å —Å–º–µ—à–∞–Ω–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å: —Ä–∞–∑–Ω—ã–µ –ø—Ä–∏–≤—ã—á–∫–∏ –ø—Ä–æ—è–≤–ª—è—é—Ç—Å—è –≤ —Ä–∞–∑–Ω—ã—Ö –±–ª–æ–∫–∞—Ö. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –Ω–µ—Ç –æ–¥–Ω–æ–≥–æ "–≥–ª–∞–≤–Ω–æ–≥–æ" –±–∞—Ä—å–µ—Ä–∞ ‚Äî –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–º–µ–Ω—å—à–µ: —É—Å—Ç–∞–ª–æ—Å—Ç—å, —Å—Ç—Ä–µ—Å—Å, –Ω–µ—Å–∏—Å—Ç–µ–º–Ω–æ–µ –ø–∏—Ç–∞–Ω–∏–µ –∏ —ç–ø–∏–∑–æ–¥—ã –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ –∞–ø–ø–µ—Ç–∏—Ç–∞. –≠—Ç–æ –¥–∞—ë—Ç –≥–∏–±–∫–æ—Å—Ç—å: –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —É—Å—Ç—Ä–∞–Ω–∏—Ç—å 1‚Äì2 –∫–ª—é—á–µ–≤—ã—Ö —Ç—Ä–∏–≥–≥–µ—Ä–∞, —á—Ç–æ–±—ã —Å–¥–≤–∏–Ω—É—Ç—å—Å—è –≤–ø–µ—Ä—ë–¥.`,
}

const explanationRules = [
  {
    id: "95d",
    priority: 10,
    titlePattern: "ddd dddd ddd",
    check: (s: AnswerStats) => s.pct.d >= 0.95,
    text: explanationTexts.text_95d,
  },
  {
    id: "90a_with_b_end",
    priority: 9,
    titlePattern: "aaa aaaa bbb",
    check: (s: AnswerStats) => s.pct.a >= 0.9 && s.block3.every((l) => l === "b"),
    text: explanationTexts.text_90a_b_end,
  },
  {
    id: "90a",
    priority: 8,
    titlePattern: "aaa aaaa aaa",
    check: (s: AnswerStats) => s.pct.a >= 0.9,
    text: explanationTexts.text_90a,
  },
  {
    id: "90b",
    priority: 7,
    titlePattern: "bbb bbbb bbb",
    check: (s: AnswerStats) => s.pct.b >= 0.9,
    text: explanationTexts.text_90b,
  },
  {
    id: "90c",
    priority: 6,
    titlePattern: "ccc cccc ccc",
    check: (s: AnswerStats) => s.pct.c >= 0.9,
    text: explanationTexts.text_90c,
  },
  {
    id: "80d",
    priority: 5,
    titlePattern: "‚Äî",
    check: (s: AnswerStats) => s.pct.d >= 0.8 && s.pct.d < 0.95,
    text: explanationTexts.text_80d,
  },
  {
    id: "dda_ssda_aaa",
    priority: 4,
    titlePattern: "dda ssda aaa",
    check: (s: AnswerStats) => {
      const firstTwo = s.block1.concat(s.block2)
      const dc = firstTwo.filter((l) => l === "d" || l === "c").length
      const ab = firstTwo.length - dc
      return dc > ab && s.block3.filter((l) => l === "a").length >= 3
    },
    text: explanationTexts.text_mix_dc_a,
  },
  {
    id: "ssb_aaab_aab",
    priority: 3,
    titlePattern: "ssb aaab aab",
    check: (s: AnswerStats) => {
      const c1 = s.block1.filter((l) => l === "c").length
      const b2 = s.block2.every((l) => l === "a" || l === "b")
      const b3 = s.block3.every((l) => l === "a" || l === "b")
      return c1 >= 3 && b2 && b3
    },
    text: explanationTexts.text_c_then_ab,
  },
  {
    id: "bab_aaba_bbb",
    priority: 2,
    titlePattern: "bab aaba bbb",
    check: (s: AnswerStats) => s.all.every((l) => l === "a" || l === "b") && !(s.pct.a >= 0.9),
    text: explanationTexts.text_only_ab,
  },
  {
    id: "fallback",
    priority: 1,
    titlePattern: "mixed",
    check: (_s: AnswerStats) => true,
    text: explanationTexts.text_fallback,
  },
].sort((a, b) => b.priority - a.priority)

function pickExplanation(letters: string[]) {
  const stats = buildStats(letters)
  const rule = explanationRules.find((r) => r.check(stats))!
  return { pattern: rule.titlePattern, text: rule.text }
}

export default function WeightLossQuizApp() {
  const [currentStep, setCurrentStep] = useState(0)
  const [answers, setAnswers] = useState<QuizAnswer[]>([])
  const [userProfile, setUserProfile] = useState<string>("")

  const [selectedGender, setSelectedGender] = useState<string>("")
  const [age, setAge] = useState<number | undefined>(undefined)
  const [height, setHeight] = useState<number | undefined>(undefined)
  const [weight, setWeight] = useState<number | undefined>(undefined)

  const [showBMIPage, setShowBMIPage] = useState(false)
  const [currentQuizStep, setCurrentQuizStep] = useState(0)

  const [miniQuizStep, setMiniQuizStep] = useState(0)
  const [miniQuizAnswers, setMiniQuizAnswers] = useState<Record<string, string | string[]>>({})
  const [miniQuizCompleted, setMiniQuizCompleted] = useState(false)

  const [showFact, setShowFact] = useState(false)
  const [showTestimonial1, setShowTestimonial1] = useState(false)

  const [showReassurance, setShowReassurance] = useState(false)
  const [pendingAnswer, setPendingAnswer] = useState<QuizAnswer | null>(null)
  const [pendingMessage, setPendingMessage] = useState<string | null>(null)

  const [letterAnswers, setLetterAnswers] = useState<string[]>([])

  const totalSteps = 25 // Landing + basics + BMI + 10 quiz questions + explanation + result + loading + offer + thank you
  const progress = (currentStep / totalSteps) * 100

  const getQuizProgress = () => {
    if (currentQuizStep < 3) {
      // Eating section (questions 0-2): 0% to 30%
      return ((currentQuizStep + 1) / 3) * 30
    } else if (currentQuizStep < 7) {
      // Lifestyle section (questions 3-6): 30% to 70%
      return 30 + ((currentQuizStep - 2) / 4) * 40
    } else {
      // Attempts section (questions 7-9): 70% to 100%
      return 70 + ((currentQuizStep - 6) / 3) * 30
    }
  }

  const getSectionTitle = () => {
    if (currentQuizStep < 3) return "–í–∞—à–µ –ø–∏—Ç–∞–Ω–∏–µ"
    if (currentQuizStep < 7) return "–í–∞—à –æ–±—Ä–∞–∑ –∂–∏–∑–Ω–∏"
    return "–í–∞—à–∏ –º–µ—Ç–æ–¥—ã –ø–æ—Ö—É–¥–µ–Ω–∏—è" // Changed from "–í–∞—à–∏ –ø–æ–ø—ã—Ç–∫–∏"
  }

  const handleAnswer = (questionId: string, answer: string, category: "eating" | "lifestyle" | "attempts") => {
    const newAnswers = [...answers.filter((a) => a.questionId !== questionId), { questionId, answer, category }]
    setAnswers(newAnswers)

    // Track letter answers for explanation
    const question = quizQuestions[currentQuizStep]
    const optionIndex = question.options.findIndex((opt) => opt.text === answer)
    const letter = ["a", "b", "c", "d"][optionIndex] || "a"

    const newLetterAnswers = [...letterAnswers]
    newLetterAnswers[currentQuizStep] = letter
    setLetterAnswers(newLetterAnswers)

    if (currentQuizStep === 2) {
      // After third eating question, show fact screen
      setShowFact(true)
      return
    } else if (currentQuizStep === 6) {
      // After lifestyle questions, show fact2
      setCurrentStep(9)
      return
    } else if (currentQuizStep === 9) {
      // After attempts questions, show fact3
      setCurrentStep(11)
      return
    } else {
      setCurrentQuizStep(currentQuizStep + 1)
    }
  }

  const analyzeAnswers = (allAnswers: QuizAnswer[]) => {
    const eatingAnswers = allAnswers.filter((a) => a.category === "eating")
    const lifestyleAnswers = allAnswers.filter((a) => a.category === "lifestyle")
    const attemptsAnswers = allAnswers.filter((a) => a.category === "attempts")

    // Simple logic to determine profile
    const stressEating = eatingAnswers.some((a) => a.answer.includes("–≤–∏–Ω—É") || a.answer.includes("—Ç—è–∂–µ—Å—Ç—å"))
    const highStress = lifestyleAnswers.some((a) => a.answer.includes("–í—ã—Å–æ–∫–∏–π") || a.answer.includes("–û—á–µ–Ω—å –≤—ã—Å–æ–∫–∏–π"))
    const multipleAttempts = attemptsAnswers.some((a) => a.answer.includes("–ú–Ω–æ–≥–æ —Ä–∞–∑") || a.answer.includes("3-5"))

    if (stressEating && highStress) {
      setUserProfile("stress-eater")
    } else if (multipleAttempts) {
      setUserProfile("serial-dieter")
    } else {
      setUserProfile("beginner")
    }
  }

  const onSelectAnswer = (q: Question, optionText: string) => {
    const msg = reassuranceMessages[q.id]?.[optionText]
    if (msg) {
      setPendingAnswer({ questionId: q.id, answer: optionText, category: q.category })
      setPendingMessage(msg)
      setShowReassurance(true)
    } else {
      handleAnswer(q.id, optionText, q.category)
    }
  }

  const renderLandingPage = () => (
    <div className="min-h-screen bg-gradient-to-br from-green-50 to-peach-50 p-4">
      <div className="max-w-4xl mx-auto">
        {/* Header */}
        <div className="text-center py-8">
          <div className="flex items-center justify-center gap-2 mb-4">
            <Heart className="w-8 h-8 text-green-600" />
            <span className="text-2xl font-bold text-gray-800">NaturalSlim</span>
          </div>
        </div>

        {/* Hero Section */}
        <Card className="mb-8 border-0 shadow-lg bg-white/80 backdrop-blur">
          <CardContent className="p-8 text-center">
            <h1 className="text-3xl md:text-4xl font-bold text-gray-800 leading-tight mb-11 mt-5 mr-2 ml-2">
              –û–±—Ä–µ—Ç–∏—Ç–µ —Ñ–∏–≥—É—Ä—É –º–µ—á—Ç—ã –≤—Å–µ–≥–æ –∑–∞ 10 –≤–æ–ø—Ä–æ—Å–æ–≤
            </h1>
            <div className="flex flex-col sm:flex-row items-center justify-center gap-4 mb-6">
              <p className="text-xl text-green-700 font-semibold my-2 text-center">
                –¢–µ—Å—Ç –ø—Ä–æ—à–ª–∏ —É–∂–µ –±–æ–ª–µ–µ 20000 –∂–µ–Ω—â–∏–Ω –ø–æ –≤—Å–µ–º—É –º–∏—Ä—É{" "}
              </p>
              <div className="flex -space-x-2 overflow-hidden justify-center flex-wrap">
                <Image
                  src="/placeholder.svg?height=24&width=24"
                  alt="Woman avatar 1"
                  width={24}
                  height={24}
                  className="w-6 h-6 sm:w-7 sm:h-7 rounded-full border-2 border-white shadow-sm"
                />
                <Image
                  src="/placeholder.svg?height=24&width=24"
                  alt="Woman avatar 2"
                  width={24}
                  height={24}
                  className="w-6 h-6 sm:w-7 sm:h-7 rounded-full border-2 border-white shadow-sm"
                />
                <Image
                  src="/placeholder.svg?height=24&width=24"
                  alt="Woman avatar 3"
                  width={24}
                  height={24}
                  className="w-6 h-6 sm:w-7 sm:h-7 rounded-full border-2 border-white shadow-sm"
                />
              </div>
            </div>

            <div className="bg-green-50 rounded-lg p-6 mb-6">
              <p className="text-gray-700 text-lg leading-relaxed py-1.5 mx-0">
                –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –Ω–∞ –æ–¥–∏–Ω –∏–∑ —Å–∞–º—ã—Ö —Ç–æ—á–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤, –ø–æ–º–æ–≥–∞—é—â–∏–π –Ω–∞–π—Ç–∏ –ø—Ä–∏—á–∏–Ω—ã, –ø–æ –∫–æ—Ç–æ—Ä—ã–º –ª–∏—à–Ω–∏–π –≤–µ—Å –Ω–µ
                —É—Ö–æ–¥–∏—Ç. –í –∫–æ–Ω—Ü–µ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–ª–∞–Ω. –û–Ω –º–æ–∂–µ—Ç –≤–∫–ª—é—á–∞—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ø–∏—Ç–∞–Ω–∏—é/—Ä–µ–∂–∏–º—É –∏ –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã–µ –¥–æ–±–∞–≤–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–º–æ–≥—É—Ç –≤–∞–º –¥–æ—Å—Ç–∏—á—å –∂–µ–ª–∞–µ–º–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞.
              </p>
            </div>

            <div className="grid md:grid-cols-3 gap-4 mb-8">
              <div className="flex items-center gap-3 bg-white p-4 rounded-lg shadow-sm">
                <Clock className="w-6 h-6 text-green-600" />
                <span className="text-gray-700 my-0 py-3">{"–ú–µ–Ω–µ–µ 5 –º–∏–Ω—É—Ç"} </span>
              </div>
              <div className="flex items-center gap-3 bg-white p-4 rounded-lg shadow-sm">
                <Shield className="w-6 h-6 text-green-600" />
                <span className="text-gray-700">100% –ê–Ω–æ–Ω–∏–º–Ω–æ</span>
              </div>
              <div className="flex items-center gap-3 bg-white p-4 rounded-lg shadow-sm">
                <Leaf className="w-6 h-6 text-green-600" />
                <span className="text-gray-700">–ù–∞—Ç—É—Ä–∞–ª—å–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è</span>
              </div>
            </div>

            <Button
              onClick={() => setCurrentStep(1)}
              className="bg-green-600 hover:bg-green-700 text-white px-8 py-4 text-lg rounded-full shadow-lg transform hover:scale-105 transition-all my-4"
            >
              –ù–∞—á–∞—Ç—å –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å
              <ArrowRight className="w-5 h-5 ml-2" />
            </Button>

            <div className="mt-6 flex items-center justify-center gap-2 text-sm text-gray-600">
              <Users className="w-4 h-4" />
              <span>–ë–æ–ª–µ–µ 1,340+ –∂–µ–Ω—â–∏–Ω –≤ –ü–µ—Ä—É —É–∂–µ –ø–æ–ª—É—á–∏–ª–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ –±–µ—Å–ø–ª–∞—Ç–Ω–æ </span>
            </div>
          </CardContent>
        </Card>

        {/* Trust Indicators */}
        <div className="grid md:grid-cols-2 gap-6">
          <Card className="border-0 shadow-md">
            <CardContent className="p-6">
              <div className="flex items-center gap-3 mb-4">
                <div className="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center">
                  <Heart className="w-6 h-6 text-green-600" />
                </div>
                <h3 className="font-semibold text-gray-800">–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥ </h3>
              </div>
              <p className="text-gray-600">
                –ö–∞–∂–¥–∞—è –∂–µ–Ω—â–∏–Ω–∞ —É–Ω–∏–∫–∞–ª—å–Ω–∞. –ù–∞—à –∞–Ω–∞–ª–∏–∑ —É—á–∏—Ç—ã–≤–∞–µ—Ç –≤–∞—à –æ–±—Ä–∞–∑ –∂–∏–∑–Ω–∏, —Å—Ç—Ä–µ—Å—Å –∏ –ø—Ä–æ—à–ª—ã–π –æ–ø—ã—Ç, —á—Ç–æ–±—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å
                –≤–∞–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏, —Å –∫–æ—Ç–æ—Ä—ã–º–∏ –≤—ã —Å–º–æ–∂–µ—Ç–µ –¥–æ—Å—Ç–∏—á—å –Ω–∞–∏–ª—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –∫—Ä–∞—Ç—á–∞–π—à–∏–µ —Å—Ä–æ–∫–∏.
              </p>
            </CardContent>
          </Card>

          <Card className="border-0 shadow-md">
            <CardContent className="p-6">
              <div className="flex items-center gap-3 mb-4">
                <div className="w-12 h-12 bg-peach-100 rounded-full flex items-center justify-center">
                  <Leaf className="w-6 h-6 text-peach-600" />
                </div>
                <h3 className="font-semibold text-gray-800">100% –û–¥–æ–±—Ä–µ–Ω–æ –Ω—É—Ç—Ä–∏—Ü–∏–æ–ª–æ–≥–∞–º–∏ </h3>
              </div>
              <p className="text-gray-600">
                –ù–∞—à–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç —Å–∞–º—ã–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∏ –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ —Å–æ–∑–¥–∞–Ω—ã –ø—Ä–∏ —É—á–∞—Å—Ç–∏–∏
                –≤–µ–¥—É—â–∏—Ö –Ω—É—Ç—Ä–∏—Ü–∏–æ–ª–æ–≥–æ–≤ —Å—Ç—Ä–∞–Ω—ã –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –±–µ–∑ –≤—Ä–µ–¥–∞ –¥–ª—è –∑–¥–æ—Ä–æ–≤—å—è.
              </p>
            </CardContent>
          </Card>
        </div>
      </div>
    </div>
  )

  const renderBasicsPage = () => (
    <div className="min-h-screen bg-gradient-to-br from-green-50 to-peach-50 p-4">
      <div className="max-w-2xl mx-auto">
        {/* Header */}
        <div className="text-center py-8">
          <div className="flex items-center justify-center gap-2 mb-4">
            <Heart className="w-8 h-8 text-green-600" />
            <span className="text-2xl font-bold text-gray-800">NaturalSlim</span>
          </div>
        </div>
        {/* Progress Bar */}
        <div className="mb-8"></div>

        {/* Question Card */}
        <Card className="border-0 shadow-lg">
          <CardContent className="p-8">
            <h2 className="text-2xl font-semibold text-gray-800 mb-8 text-center leading-relaxed">
              Let us know some basics
            </h2>

            {/* Gender Selection */}
            <div className="grid grid-cols-2 gap-4 mb-8">
              <div
                className={`flex flex-col items-center justify-center p-6 rounded-lg border-2 cursor-pointer transition-all ${selectedGender === "female"
                    ? "border-green-500 bg-green-100"
                    : "border-gray-200 hover:border-green-300 hover:bg-green-50"
                  }`}
                onClick={() => setSelectedGender("female")}
              >
                <Image
                  src="/placeholder.svg?height=64&width=64"
                  alt="Female"
                  width={64}
                  height={64}
                  className="mb-2 rounded-full"
                />
                <span className="text-gray-700 font-medium">Female</span>
              </div>
              <div
                className={`flex flex-col items-center justify-center p-6 rounded-lg border-2 cursor-pointer transition-all ${selectedGender === "male"
                    ? "border-green-500 bg-green-100"
                    : "border-gray-200 hover:border-green-300 hover:bg-green-50"
                  }`}
                onClick={() => setSelectedGender("male")}
              >
                <Image
                  src="/placeholder.svg?height=64&width=64"
                  alt="Male"
                  width={64}
                  height={64}
                  className="mb-2 rounded-full"
                />
                <span className="text-gray-700 font-medium">Male</span>
              </div>
            </div>

            {/* Age Input */}
            <div className="mb-6">
              <label className="block text-sm font-medium text-gray-700 mb-2">Age</label>
              <input
                type="number"
                placeholder="Enter your age"
                min={18}
                max={60}
                step={1}
                onChange={(e) => setAge(e.target.value ? Number.parseInt(e.target.value) : undefined)}
                className="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500"
              />
            </div>

            {/* Height and Weight Inputs */}
            <div className="grid grid-cols-2 gap-4 mb-6">
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">Height cm</label>
                <input
                  type="number"
                  placeholder="Enter height"
                  min={130}
                  max={220}
                  step={1}
                  onChange={(e) => setHeight(e.target.value ? Number.parseInt(e.target.value) : undefined)}
                  className="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500"
                />
              </div>
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">Weight kg</label>
                <input
                  type="number"
                  placeholder="Enter weight"
                  min={40}
                  max={180}
                  step={1}
                  onChange={(e) => setWeight(e.target.value ? Number.parseInt(e.target.value) : undefined)}
                  className="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500"
                />
              </div>
            </div>

            {/* Next Button */}
            <Button
              onClick={() => setShowBMIPage(true)}
              disabled={!selectedGender || !age || !height || !weight}
              className="w-full bg-green-600 hover:bg-green-700 text-white py-3 text-lg rounded-full disabled:opacity-50 disabled:cursor-not-allowed"
            >
              Next
            </Button>
          </CardContent>
        </Card>
      </div>
    </div>
  )

  const renderBMIPage = () => {
    if (!selectedGender || !age || !height || !weight) {
      return null
    }

    const BMI_TABLE = {
      female: { "18-29": 22, "30-44": 23, "45-60": 24 },
      male: { "18-29": 23, "30-44": 24, "45-60": 25 },
    }

    const bmi = Math.round((weight / Math.pow(height / 100, 2)) * 10) / 10

    let ageBand = "18-29"
    if (age >= 30 && age <= 44) ageBand = "30-44"
    else if (age >= 45) ageBand = "45-60"

    const meanBMI = BMI_TABLE[selectedGender as keyof typeof BMI_TABLE][ageBand as keyof typeof BMI_TABLE.female]
    const diff = Math.round(((bmi - meanBMI) / meanBMI) * 100)
    const comparison = diff > 0 ? "higher" : "lower"

    const getBMICategory = (bmi: number) => {
      if (bmi < 18.5) return "Underweight"
      if (bmi < 25) return "Normal weight"
      if (bmi < 30) return "Overweight"
      return "Obese"
    }

    const markerPosition = Math.min(Math.max((bmi / 40) * 100, 0), 100)

    return (
      <div className="min-h-screen bg-gradient-to-br from-green-50 to-peach-50 p-4">
        <div className="max-w-2xl mx-auto">
          {/* Header */}
          <div className="text-center py-3">
            <div className="flex items-center justify-center gap-2 mb-4">
              <Heart className="w-8 h-8 text-green-600" />
              <span className="text-2xl font-bold text-gray-800">NaturalSlim</span>
            </div>
          </div>
          {/* Progress Bar */}
          <div className="mb-8"></div>

          {/* BMI Card */}
          <Card className="border-0 shadow-lg">
            <CardContent className="p-8">
              <div className="text-center mb-8">
                <h2 className="text-2xl font-semibold text-gray-800">Your Body Mass Index (BMI) </h2>
              </div>

              <Card className="rounded-xl bg-muted/5 shadow-md p-6 space-y-5 max-w-[440px] mx-auto mb-8">
                {/* Badge and marker section */}
                <div className="relative">
                  {/* Badge positioned above the scale */}
                  <div
                    className="absolute -top-12 transform -translate-x-1/2 z-10"
                    style={{ left: `${markerPosition}%` }}
                  >
                    <Badge className="bg-slate-800 text-white rounded-full px-4 py-1">You ‚Äì {bmi}</Badge>
                  </div>

                  {/* Vertical dotted line */}
                  <div
                    className="absolute -top-12 h-12 border-l border-dashed border-muted transform -translate-x-1/2"
                    style={{ left: `${markerPosition}%` }}
                  ></div>

                  {/* Gradient bar */}
                  <div className="relative">
                    <div className="h-1.5 rounded-full bg-gradient-to-r from-sky-400 via-emerald-500 via-amber-400 to-rose-500"></div>

                    {/* Circular marker */}
                    <div
                      className="absolute top-1/2 w-5 h-5 border-2 border-white bg-slate-800 shadow rounded-full transform -translate-x-1/2 -translate-y-1/2"
                      style={{ left: `${markerPosition}%` }}
                    ></div>
                  </div>

                  {/* Tick labels */}
                  <div className="flex justify-between text-xs mt-2 px-1">
                    <span>15</span>
                    <span>18.5</span>
                    <span>25</span>
                    <span>30</span>
                    <span>40</span>
                  </div>
                </div>

                {/* Category labels */}
                <div className="flex justify-between text-xs uppercase tracking-wide">
                  {["Underweight", "Normal", "Overweight", "High"].map((cat) => (
                    <span key={cat} className={cat === getBMICategory(bmi) ? "font-bold text-primary" : ""}>
                      {cat}
                    </span>
                  ))}
                </div>

                {/* WHO Classification label */}
                <div className="text-center">
                  <span className="text-xs text-gray-500">Classification based on WHO guidelines</span>
                </div>

                {/* Dynamic cards based on BMI category */}
                {(() => {
                  const category = getBMICategory(bmi)
                  let healthNote = ""
                  let goodNews = ""

                  if (bmi < 18.5) {
                    // Underweight
                    healthNote = "Below the comfortable range: possible nutrient deficiencies and hormonal imbalances."
                    goodNews = "A small increase in calories and protein can quickly bring you back to normal."
                  } else if (bmi >= 18.5 && bmi < 25) {
                    // Normal
                    healthNote = "BMI is in the healthy range, but it doesn't show body composition or stress level."
                    goodNews = "Maintain sleep, movement, and protein ‚Äî that keeps metabolism active."
                  } else if (bmi >= 25 && bmi < 30) {
                    // Overweight
                    healthNote = "Higher risk of hypertension and insulin resistance if weight stays the same."
                    goodNews = "Losing just 5‚Äì7% of your weight noticeably lowers blood pressure and sugar cravings."
                  } else {
                    // High (Obese)
                    healthNote = "Heavy load on heart and joints; risk of type 2 diabetes increases."
                    goodNews = "The first ‚àí3‚Äì4 kg reduce inflammation and improve sleep ‚Äî a great start."
                  }

                  return (
                    <>
                      {/* Health note card */}
                      <div className="rounded bg-amber-50 p-4 flex gap-3">
                        <div className="w-5 h-5 bg-amber-400 text-white rounded-full flex items-center justify-center text-xs font-bold">
                          !
                        </div>
                        <div className="text-sm">
                          <span className="font-bold">Health note:</span> {healthNote}
                        </div>
                      </div>

                      {/* Good news card */}
                      <div className="rounded bg-emerald-50 p-4 flex gap-3">
                        <div className="w-5 h-5 bg-emerald-400 text-white rounded-full flex items-center justify-center text-xs font-bold">
                          !
                        </div>
                        <div className="text-sm">
                          <span className="font-bold">Good news:</span> {goodNews}
                        </div>
                      </div>
                    </>
                  )
                })()}
              </Card>

              {/* Population comparison fact box */}
              {(() => {
                let comparisonText = ""

                if (bmi < 18.5) {
                  comparisonText = "Your value is below average for your age group."
                } else if (bmi >= 18.5 && bmi < 25) {
                  comparisonText = "Your value matches the average level for your age group."
                } else if (bmi >= 25 && bmi < 30) {
                  comparisonText = "Your value is slightly above average among women your age."
                } else {
                  comparisonText = "Your value is noticeably above the average for your age group."
                }

                return (
                  <div className="mt-6 bg-blue-50 rounded-lg p-4 text-sm text-gray-700">
                    <p>{comparisonText}</p>
                  </div>
                )
              })()}
              <div className="text-center space-y-2 mb-8"></div>

              <div className="flex flex-col sm:flex-row gap-3 sm:gap-4 px-4">
                <Button
                  onClick={() => setShowBMIPage(false)}
                  variant="outline"
                  className="w-full sm:flex-1 text-gray-500 hover:text-gray-700 py-3 text-lg rounded-full opacity-60 hover:opacity-100 border-2 border-gray-300 hover:border-gray-400"
                >
                  Back
                </Button>
                <Button
                  onClick={() => {
                    setShowBMIPage(false)
                    setCurrentStep(2) // Move to pre-questionnaire intro page
                  }}
                  className="w-full sm:flex-1 bg-green-600 hover:bg-green-700 text-white py-3 text-lg rounded-full"
                >
                  –ó–≤—É—á–∏—Ç —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ!
                </Button>
              </div>
            </CardContent>
          </Card>
        </div>
      </div>
    )
  }

  const renderMotivationPage = () => (
    <div className="min-h-screen bg-gradient-to-br from-green-50 to-peach-50 p-4">
      <div className="max-w-2xl mx-auto py-10">
        {/* Header */}
        <div className="text-center py-8">
          <div className="flex items-center justify-center gap-2 mb-4">
            <Heart className="w-8 h-8 text-green-600" />
            <span className="text-2xl font-bold text-gray-800">NaturalSlim</span>
          </div>
        </div>

        <Card className="border-0 shadow-lg">
          <CardContent className="p-8">
            <h2 className="text-2xl font-bold text-center mb-6">–í—ã –Ω–µ –æ–¥–∏–Ω–æ–∫–∏</h2>

            <div className="space-y-4 mb-8">
              <p className="text-gray-700 leading-relaxed">
                –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç, —á—Ç–æ 87% –∂–µ–Ω—â–∏–Ω —Å—Ç–∞–ª–∫–∏–≤–∞—é—Ç—Å—è —Å —Ç–µ–º–∏ –∂–µ —Ç—Ä—É–¥–Ω–æ—Å—Ç—è–º–∏ –≤ –ø–æ—Ö—É–¥–µ–Ω–∏–∏, —á—Ç–æ –∏ –≤—ã. –≠—Ç–æ –Ω–µ
                –≤–∞—à–∞ –≤–∏–Ω–∞ ‚Äî —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ä–∏—Ç–º –∂–∏–∑–Ω–∏, —Å—Ç—Ä–µ—Å—Å –∏ –≥–æ—Ä–º–æ–Ω–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ–∑–¥–∞—é—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è.
              </p>
              <p className="text-gray-700 leading-relaxed">
                –ù–æ –µ—Å—Ç—å —Ö–æ—Ä–æ—à–∏–µ –Ω–æ–≤–æ—Å—Ç–∏: —Ç—ã—Å—è—á–∏ –∂–µ–Ω—â–∏–Ω —É–∂–µ –Ω–∞—à–ª–∏ —Ä–µ—à–µ–Ω–∏–µ —Å –ø–æ–º–æ—â—å—é –Ω–∞—à–∏—Ö –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π.
                –û–Ω–∏ —Å–º–æ–≥–ª–∏ –¥–æ—Å—Ç–∏—á—å —Å–≤–æ–∏—Ö —Ü–µ–ª–µ–π, –∏ –≤—ã —Ç–æ–∂–µ —Å–º–æ–∂–µ—Ç–µ!
              </p>
            </div>

            {/* Image Gallery */}
            <div className="flex flex-wrap justify-center gap-4 mb-6">
              <Image
                src="/placeholder.svg?height=90&width=140"
                alt="Success story 1"
                width={140}
                height={90}
                className="rounded-lg shadow-sm"
              />
              <Image
                src="/placeholder.svg?height=90&width=140"
                alt="Success story 2"
                width={140}
                height={90}
                className="rounded-lg shadow-sm"
              />
              <Image
                src="/placeholder.svg?height=90&width=140"
                alt="Success story 3"
                width={140}
                height={90}
                className="rounded-lg shadow-sm"
              />
            </div>

            <p className="text-sm font-medium text-center mb-2">–ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞—à–∏—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –¥–ª—è –≤–∞—Å*</p>

            <p className="text-xs text-center text-gray-400 mb-8">* –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –º–æ–≥—É—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è</p>

            <Button
              onClick={() => setCurrentStep(14)}
              className="w-full bg-green-600 hover:bg-green-700 text-white py-3 text-lg rounded-full"
            >
              –ü–µ—Ä–µ–π—Ç–∏ –∫ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º
            </Button>
          </CardContent>
        </Card>
      </div>
    </div>
  )

  const renderPreQuestionnaireIntroPage = () => (
    <div className="min-h-screen bg-gradient-to-br from-green-50 to-peach-50 p-4">
      <div className="max-w-2xl mx-auto py-10">
        {/* Header */}
        <div className="text-center py-8">
          <div className="flex items-center justify-center gap-2 mb-4">
            <Heart className="w-8 h-8 text-green-600" />
            <span className="text-2xl font-bold text-gray-800">NaturalSlim</span>
          </div>
        </div>

        <Card className="border-0 shadow-lg">
          <CardContent className="p-8">
            <h2 className="text-2xl font-bold text-center mb-4">–°–¥–µ–ª–∞–µ–º —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –µ—â—ë —Ç–æ—á–Ω–µ–µ</h2>

            <p className="text-gray-700 text-lg text-center mb-6">
              –ú—ã —É–∂–µ –∑–Ω–∞–µ–º –≤–∞—à —Ä–æ—Å—Ç, –≤–µ—Å –∏ —Ü–µ–ª—å. –û—Å—Ç–∞–ª–æ—Å—å —É—á–µ—Å—Ç—å –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –ø–∏—Ç–∞–Ω–∏—è, –≥–æ—Ä–º–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Ñ–æ–Ω–∞ –∏ –≤–æ–∑–º–æ–∂–Ω—ã–µ
              –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è, —á—Ç–æ–±—ã —Ä–µ—Ü–µ–ø—Ç –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ø–æ–¥–æ—à—ë–ª –∏–º–µ–Ω–Ω–æ –≤–∞–º.
            </p>

            {/* Icon Grid */}
            <div className="flex justify-center mb-6 flex-wrap gap-x-5">
              <div className="flex flex-col items-center">
                <div className="w-14 h-14 bg-green-100 rounded-full flex items-center justify-center text-2xl mb-2">
                  üçº
                </div>
                <span className="text-xs text-center px-0 mx-0">{"–ë–µ—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç—å"}</span>
              </div>
              <div className="flex flex-col items-center">
                <div className="w-14 h-14 bg-green-100 rounded-full flex items-center justify-center text-2xl mb-2">
                  ü•¶
                </div>
                <span className="text-xs text-center">–†–∞—Ü–∏–æ–Ω</span>
              </div>
              <div className="flex flex-col items-center">
                <div className="w-14 h-14 bg-green-100 rounded-full flex items-center justify-center text-2xl mb-2">
                  üíä
                </div>
                <span className="text-xs text-center">–¢–∞–±–ª–µ—Ç–∫–∏</span>
              </div>
              <div className="flex flex-col items-center">
                <div className="w-14 h-14 bg-green-100 rounded-full flex items-center justify-center text-2xl mb-2">
                  üî•
                </div>
                <span className="text-xs text-center">–ì–æ—Ä–º–æ–Ω—ã</span>
              </div>
            </div>

            {/* Info Box */}
            <div className="bg-blue-50 rounded-lg p-4 text-sm text-gray-700 mb-8">
              <ul className="space-y-1">
                <li>‚Ä¢ –û—Ç–≤–µ—Ç—ã –∑–∞–π–º—É—Ç –º–µ–Ω—å—à–µ –º–∏–Ω—É—Ç—ã</li>
                <li>‚Ä¢ –ù–∏–∫–∞–∫–∏—Ö –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö</li>
                <li>‚Ä¢ –ú–æ–∂–Ω–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –≤–æ–ø—Ä–æ—Å, –µ—Å–ª–∏ –Ω–µ —É–≤–µ—Ä–µ–Ω—ã</li>
              </ul>
            </div>

            <Button
              onClick={() => setCurrentStep(3)}
              className="w-full bg-green-600 hover:bg-green-700 text-white py-3 text-lg rounded-full"
            >
              –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å
            </Button>
          </CardContent>
        </Card>
      </div>
    </div>
  )

  const renderMiniQuestionPage = () => {
    const question = miniQuestions[miniQuizStep]
    if (!question) return null

    const handleRadioChange = (value: string) => {
      setMiniQuizAnswers((prev) => ({
        ...prev,
        [question.id]: value,
      }))
    }

    const handleCheckboxChange = (option: string, checked: boolean) => {
      setMiniQuizAnswers((prev) => {
        const currentAnswers = (prev[question.id] as string[]) || []

        if (checked) {
          return {
            ...prev,
            [question.id]: [...currentAnswers, option],
          }
        } else {
          return {
            ...prev,
            [question.id]: currentAnswers.filter((item) => item !== option),
          }
        }
      })
    }

    const isValidAnswer = () => {
      const answer = miniQuizAnswers[question.id]
      if (question.type === "radio") {
        return !!answer
      } else {
        return Array.isArray(answer) && answer.length > 0
      }
    }

    const handleNext = () => {
      if (miniQuizStep === 4) {
        // After last mini question, mark as completed and go to intro page
        setMiniQuizCompleted(true)
        setCurrentStep(4)
      } else {
        setMiniQuizStep(miniQuizStep + 1)
      }
    }

    const handleSkip = () => {
      // Mark answer as skipped
      setMiniQuizAnswers((prev) => ({
        ...prev,
        [question.id]: question.type === "radio" ? "" : [],
      }))

      if (miniQuizStep === 4) {
        setCurrentStep(4)
      } else {
        setMiniQuizStep(miniQuizStep + 1)
      }
    }

    return (
      <div className="min-h-screen bg-gradient-to-br from-green-50 to-peach-50 p-4">
        <div className="max-w-2xl mx-auto py-10">
          {/* Header */}
          <div className="text-center py-8">
            <div className="flex items-center justify-center gap-2 mb-4">
              <Heart className="w-8 h-8 text-green-600" />
              <span className="text-2xl font-bold text-gray-800">NaturalSlim</span>
            </div>
          </div>

          {/* Progress */}
          <div className="flex justify-between text-sm text-gray-600 mb-6">
            <span></span>
            <span>Step {miniQuizStep + 1} of 5</span>
          </div>

          {/* Question Card */}
          <Card className="shadow-lg border-0">
            <CardContent className="px-8 py-10">
              <h2 className="text-green-600 text-xl font-semibold mb-6">{question.title}</h2>

              {question.type === "radio" ? (
                <div className="space-y-3">
                  {question.options.map((option, index) => (
                    <div
                      key={index}
                      onClick={() => handleRadioChange(option)}
                      className={`flex items-center space-x-3 p-4 rounded-xl border cursor-pointer transition-colors ${miniQuizAnswers[question.id] === option
                          ? "border-green-500 bg-green-50"
                          : "border-gray-200 hover:bg-green-300 hover:bg-green-50"
                        }`}
                    >
                      <div
                        className={`w-4 h-4 rounded-full border-2 ${miniQuizAnswers[question.id] === option ? "border-green-500 bg-green-500" : "border-gray-300"
                          }`}
                      >
                        {miniQuizAnswers[question.id] === option && (
                          <div className="w-2 h-2 bg-white rounded-full m-0.5"></div>
                        )}
                      </div>
                      <span className="flex-1 text-gray-700">{option}</span>
                    </div>
                  ))}
                </div>
              ) : (
                <div className="space-y-3">
                  {question.options.map((option, index) => (
                    <div
                      key={index}
                      onClick={() => {
                        const currentAnswers = (miniQuizAnswers[question.id] as string[]) || []
                        const isChecked = currentAnswers.includes(option)
                        handleCheckboxChange(option, !isChecked)
                      }}
                      className="flex items-center space-x-3 p-4 rounded-xl border hover:bg-green-50 transition-colors cursor-pointer"
                    >
                      <div
                        className={`w-4 h-4 rounded border-2 flex items-center justify-center ${((miniQuizAnswers[question.id] as string[]) || []).includes(option)
                            ? "border-green-500 bg-green-500"
                            : "border-gray-300"
                          }`}
                      >
                        {((miniQuizAnswers[question.id] as string[]) || []).includes(option) && (
                          <div className="text-white text-xs">‚úì</div>
                        )}
                      </div>
                      <span className="flex-1 text-gray-700">{option}</span>
                    </div>
                  ))}
                </div>
              )}

              {/* Buttons */}
              <div className="mt-8 space-y-4">
                <Button
                  onClick={handleNext}
                  disabled={!isValidAnswer()}
                  className="w-full bg-green-600 hover:bg-green-700 text-white py-3 text-lg rounded-full disabled:opacity-50 disabled:cursor-not-allowed"
                >
                  {miniQuizStep === 4 ? "Finish" : "Next"}
                </Button>

                <div className="text-center">
                  <button onClick={handleSkip} className="text-gray-500 hover:text-gray-700 text-sm underline">
                    Skip
                  </button>
                </div>
              </div>
            </CardContent>
          </Card>
        </div>
      </div>
    )
  }

  const renderPreMainQuizIntroPage = () => (
    <div className="min-h-screen bg-gradient-to-br from-green-50 to-peach-50 p-4">
      <div className="max-w-2xl mx-auto py-10">
        {/* Header */}
        <div className="text-center py-8">
          <div className="flex items-center justify-center gap-2 mb-4">
            <Heart className="w-8 h-8 text-green-600" />
            <span className="text-2xl font-bold text-gray-800">NaturalSlim</span>
          </div>
        </div>

        {/* Hero Illustration */}
        <Image
          src="/placeholder.svg?height=160&width=240"
          alt="Illustration"
          width={240}
          height={160}
          className="mx-auto mb-8"
        />

        {/* Title */}
        <h2 className="text-2xl font-bold text-gray-800 mb-4">
          –ú—ã –ø–æ—á—Ç–∏ –≥–æ—Ç–æ–≤—ã! –û—Å—Ç–∞–ª–æ—Å—å –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ 10 –∫–æ—Ä–æ—Ç–∫–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
        </h2>

        {/* Description */}
        <p className="text-gray-700 text-lg leading-relaxed mb-6">
          –í–∞—à–∏ –æ—Ç–≤–µ—Ç—ã –ø–æ–º–æ–≥—É—Ç –Ω–∞–º –ø–æ–¥–æ–±—Ä–∞—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ —Å —Ç–æ—á–Ω–æ—Å—Ç—å—é –¥–æ –¥–µ—Ç–∞–ª–µ–π. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ç–≤–µ—á–∞–π—Ç–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —á–µ—Å—Ç–Ω–æ
          ‚Äî –∑–¥–µ—Å—å –Ω–µ—Ç "–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö" –∏–ª–∏ "–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö" –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤, –∞ –≤—Å—ë, —á—Ç–æ –≤—ã —É–∫–∞–∂–µ—Ç–µ, —Ö—Ä–∞–Ω–∏—Ç—Å—è —Å—Ç—Ä–æ–≥–æ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ.
        </p>

        <Button
          onClick={() => setCurrentStep(5)}
          className="w-full bg-green-600 hover:bg-green-700 text-white py-4 rounded-full text-lg mb-3"
        >
          –ù–∞—á–∞—Ç—å –æ–ø—Ä–æ—Å
        </Button>

        {/* Helper Text */}
      </div>
    </div>
  )

  const renderQuizQuestion = () => {
    const question = quizQuestions[currentQuizStep]
    if (!question) return null

    if (showFact) {
      return (
        <div className="min-h-screen bg-gradient-to-br from-green-50 to-peach-50 p-4">
          <div className="max-w-2xl mx-auto">
            {/* Header */}
            <div className="text-center py-8">
              <div className="flex items-center justify-center gap-2 mb-4">
                <Heart className="w-8 h-8 text-green-600" />
                <span className="text-2xl font-bold text-gray-800">NaturalSlim</span>
              </div>
            </div>

            {/* Progress Bar */}

            {/* Fact Card */}
            <Card className="border-0 shadow-lg">
              <CardContent className="p-8">
                <div className="text-center mb-8">
                  <h2 className="font-semibold text-green-600 text-2xl mb-5">{"–§–∞–∫—Ç"}</h2>
                </div>

                {/* Image Block */}
                <div className="mb-6 text-center">
                  <Image
                    src="/placeholder.svg?height=200&width=300"
                    alt="Latin American nutrition statistics"
                    width={300}
                    height={200}
                    className="mx-auto rounded-lg shadow-sm"
                  />
                </div>

                {/* Fact Box */}
                <div className="mt-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4 text-sm text-gray-700 leading-relaxed">
                  <span className="font-semibold">{""}</span> –í –õ–∞—Ç–∏–Ω—Å–∫–æ–π –ê–º–µ—Ä–∏–∫–µ –±–æ–ª–µ–µ 50% –ª—é–¥–µ–π –∏–º–µ—é—Ç –∏–∑–±—ã—Ç–æ—á–Ω—ã–π –≤–µ—Å, –∞
                  —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω–æ—Å—Ç—å –æ–∂–∏—Ä–µ–Ω–∏—è —Å—Ä–µ–¥–∏ –≤–∑—Ä–æ—Å–ª—ã—Ö —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç 24,2%. –≠—Ç–æ –Ω–∞–ø—Ä—è–º—É—é —Å–≤—è–∑–∞–Ω–æ —Å –Ω–µ–∑–¥–æ—Ä–æ–≤—ã–º –ø–∏—Ç–∞–Ω–∏–µ–º,
                  —Å–ª–∞–¥–∫–∏–º–∏ –Ω–∞–ø–∏—Ç–∫–∞–º–∏ –∏ —á–∞—Å—Ç—ã–º–∏ –ø–µ—Ä–µ–∫—É—Å–∞–º–∏.
                  <p className="mt-2 text-xs text-gray-500">
                    –ò—Å—Ç–æ—á–Ω–∏–∫:{" "}
                    <a
                      href="https://www.unicef.org/lac/media/42906/file/Social%20norms,%20nutrition%20and%20body%20image%20in%20latin%20america%20and%20the%20caribbean.pdf"
                      target="_blank"
                      rel="noopener noreferrer"
                      className="text-blue-600 hover:text-blue-800 underline"
                    >
                      UNICEF (—Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á—ë—Ç)
                    </a>
                  </p>
                </div>

                {/* Continue Button */}
                <div className="mt-8">
                  <Button
                    onClick={() => {
                      setShowFact(false)
                      setShowTestimonial1(true)
                    }}
                    className="w-full bg-green-600 hover:bg-green-700 text-white py-3 text-lg rounded-full"
                  >
                    –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å
                  </Button>
                </div>
              </CardContent>
            </Card>
          </div>
        </div>
      )
    }

    if (showTestimonial1) {
      return renderFirstTestimonialPage()
    }

    if (showReassurance && pendingMessage && pendingAnswer) {
      return (
        <div className="min-h-screen bg-gradient-to-br from-green-50 to-peach-50 p-4">
          <div className="max-w-2xl mx-auto">
            {/* Header */}
            <div className="text-center py-8">
              <div className="flex items-center justify-center gap-2 mb-4">
                <Heart className="w-8 h-8 text-green-600" />
                <span className="text-2xl font-bold text-gray-800">NaturalSlim</span>
              </div>
            </div>

            {/* Reassurance Card */}
            <Card className="border-0 shadow-lg">
              <CardContent className="p-8">
                <div className="text-center mb-6">
                  <div className="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                    <Heart className="w-8 h-8 text-green-600" />
                  </div>
                  <p className="text-gray-700 text-lg leading-relaxed">{pendingMessage}</p>
                </div>

                <Button
                  onClick={() => {
                    handleAnswer(pendingAnswer.questionId, pendingAnswer.answer, pendingAnswer.category)
                    setShowReassurance(false)
                    setPendingAnswer(null)
                    setPendingMessage(null)
                  }}
                  className="w-full bg-green-600 hover:bg-green-700 text-white py-3 text-lg rounded-full"
                >
                  –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å
                </Button>
              </CardContent>
            </Card>
          </div>
        </div>
      )
    }

    return (
      <div className="min-h-screen bg-gradient-to-br from-green-50 to-peach-50 p-4">
        <div className="max-w-2xl mx-auto">
          {/* Header */}
          <div className="text-center py-8">
            <div className="flex items-center justify-center gap-2 mb-4">
              <Heart className="w-8 h-8 text-green-600" />
              <span className="text-2xl font-bold text-gray-800">NaturalSlim</span>
            </div>
          </div>
          {/* Progress Bar */}
          <div className="mb-8">
            <div className="flex justify-between text-sm text-gray-600 mb-2">
              <span>Progreso: {Math.round(getQuizProgress())}%</span>
              <span>{currentQuizStep + 1}/10</span>
            </div>

            {/* Segmented Progress Bar */}
            <div className="flex gap-1 h-2">
              {/* Segment 1: Questions 1-3 */}
              <div className="flex-[3] bg-gray-200 rounded-l-full overflow-hidden">
                <div
                  className="h-full bg-green-600 transition-all duration-300 ease-out"
                  style={{
                    width: currentQuizStep < 3 ? `${((currentQuizStep + 1) / 3) * 100}%` : "100%",
                  }}
                ></div>
              </div>

              {/* Segment 2: Questions 4-7 */}
              <div className="flex-[4] bg-gray-200 overflow-hidden">
                <div
                  className="h-full bg-green-600 transition-all duration-300 ease-out"
                  style={{
                    width:
                      currentQuizStep < 3 ? "0%" : currentQuizStep < 7 ? `${((currentQuizStep - 2) / 4) * 100}%` : "100%",
                  }}
                ></div>
              </div>

              {/* Segment 3: Questions 8-10 */}
              <div className="flex-[3] bg-gray-200 rounded-r-full overflow-hidden">
                <div
                  className="h-full bg-green-600 transition-all duration-300 ease-out"
                  style={{
                    width: currentQuizStep < 7 ? "0%" : `${((currentQuizStep - 6) / 3) * 100}%`,
                  }}
                ></div>
              </div>
            </div>
          </div>

          {/* Question Card */}
          <Card className="border-0 shadow-lg">
            <CardContent className="p-8">
              <div className="text-center mb-8">
                <h2 className="font-semibold text-green-600 text-2xl mb-5">{getSectionTitle()}</h2>
                <h3 className="font-medium text-gray-800 leading-relaxed text-lg">{question.question}</h3>
              </div>

              {/* Answer Options */}
              <div className="space-y-4">
                {question.options.map((option, index) => (
                  <div
                    key={index}
                    onClick={() => onSelectAnswer(question, option.text)}
                    className="flex items-center gap-4 p-4 border-gray-200 hover:border-green-300 hover:bg-green-50 cursor-pointer transition-all border-2 rounded-3xl"
                  >
                    <div className="text-2xl">{option.emoji}</div>
                    <span className="text-gray-700 flex-1">{option.text}</span>
                  </div>
                ))}
              </div>
            </CardContent>
          </Card>
        </div>
      </div>
    )
  }

  const renderFirstTestimonialPage = () => (
    <div className="min-h-screen bg-gradient-to-br from-green-50 to-peach-50 p-4">
      <div className="max-w-2xl mx-auto">
        {/* Header */}
        <div className="text-center py-8">
          <div className="flex items-center justify-center gap-2 mb-4">
            <Heart className="w-8 h-8 text-green-600" />
            <span className="text-2xl font-bold text-gray-800">NaturalSlim</span>
          </div>
        </div>

        {/* Testimonial Card */}
        <Card className="border-0 shadow-lg">
          <CardContent className="p-8">
            <div className="text-center mb-8">
              <h2 className="font-semibold text-green-600 text-2xl mb-5">–†–µ–∑—É–ª—å—Ç–∞—Ç –≠–ª–µ–Ω—ã </h2>
            </div>

            {/* Image */}
            <div className="mb-6 text-center">
              <Image
                src="/placeholder.svg?height=140&width=140"
                alt="Testimonial participant"
                width={140}
                height={140}
                className="mx-auto rounded-full shadow-sm"
              />
            </div>
            {/* Result text */}
            <div className="mb-4 text-center"></div>
            {/* Quote */}
            <div className="mb-6 text-center">
              <p className="text-gray-700 text-lg italic leading-relaxed">
                "–Ø –¥—É–º–∞–ª–∞, —á—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞ —Ç–æ–ª—å–∫–æ –≤ –º–æ–µ–π —Å–∏–ª–µ –≤–æ–ª–∏. –û–∫–∞–∑–∞–ª–æ—Å—å, –¥–µ–ª–æ –±—ã–ª–æ –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ–¥—Ö–æ–¥–µ –∫ –ø–∏—Ç–∞–Ω–∏—é –∏
                –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–º —Å—Ç—Ä–µ—Å—Å–µ."
              </p>
            </div>

            {/* Bullet List */}
            <div className="mb-8 bg-green-50 rounded-lg p-4">
              <ul className="space-y-2 text-sm text-gray-700">
                <li>‚Ä¢ –°–±—Ä–æ—Å–∏–ª–∞ 7,5 –∫–≥ –∑–∞ –ø–æ–ª—Ç–æ—Ä–∞ –º–µ—Å—è—Ü–∞</li>
                <li>‚Ä¢ –ü–µ—Ä–µ—Å—Ç–∞–ª–∞ –∑–∞–µ–¥–∞—Ç—å —Å—Ç—Ä–µ—Å—Å</li>
                <li>‚Ä¢ –£–ª—É—á—à–∏–ª—Å—è —Å–æ–Ω –∏ —ç–Ω–µ—Ä–≥–∏—è</li>
                <li>‚Ä¢ –ù–µ —Å–∏–¥–µ–ª–∞ –Ω–∞ –∂–µ—Å—Ç–∫–∏—Ö –¥–∏–µ—Ç–∞—Ö </li>
              </ul>
            </div>

            {/* Continue Button */}
            <div className="mt-8">
              <Button
                onClick={() => {
                  setShowTestimonial1(false)
                  setCurrentQuizStep(3)
                }}
                className="w-full bg-green-600 hover:bg-green-700 text-white py-3 text-lg rounded-full"
              >
                –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å
              </Button>
            </div>
          </CardContent>
        </Card>
      </div>
    </div>
  )

  const renderFactPage2 = () => (
    <div className="min-h-screen bg-gradient-to-br from-green-50 to-peach-50 p-4">
      <div className="max-w-2xl mx-auto">
        {/* Header */}
        <div className="text-center py-8">
          <div className="flex items-center justify-center gap-2 mb-4">
            <Heart className="w-8 h-8 text-green-600" />
            <span className="text-2xl font-bold text-gray-800">NaturalSlim</span>
          </div>
        </div>

        {/* Progress Bar */}
        <div className="mb-8">
          <div className="flex justify-between text-sm text-gray-600 mb-2">
            <span>Progreso: {Math.round(getQuizProgress())}%</span>
            <span>{currentQuizStep + 1}/10</span>
          </div>

          {/* Segmented Progress Bar */}
          <div className="flex gap-1 h-2">
            {/* Segment 1: Questions 1-3 */}
            <div className="flex-[3] bg-gray-200 rounded-l-full overflow-hidden">
              <div
                className="h-full bg-green-600 transition-all duration-300 ease-out"
                style={{
                  width: currentQuizStep < 3 ? `${((currentQuizStep + 1) / 3) * 100}%` : "100%",
                }}
              ></div>
            </div>

            {/* Segment 2: Questions 4-7 */}
            <div className="flex-[4] bg-gray-200 overflow-hidden">
              <div
                className="h-full bg-green-600 transition-all duration-300 ease-out"
                style={{
                  width:
                    currentQuizStep < 3 ? "0%" : currentQuizStep < 7 ? `${((currentQuizStep - 2) / 4) * 100}%` : "100%",
                }}
              ></div>
            </div>

            {/* Segment 3: Questions 8-10 */}
            <div className="flex-[3] bg-gray-200 rounded-r-full overflow-hidden">
              <div
                className="h-full bg-green-600 transition-all duration-300 ease-out"
                style={{
                  width: currentQuizStep < 7 ? "0%" : `${((currentQuizStep - 6) / 3) * 100}%`,
                }}
              ></div>
            </div>
          </div>
        </div>

        {/* Fact Card */}
        <Card className="border-0 shadow-lg">
          <CardContent className="p-8">
            <div className="text-center mb-8">
              <h2 className="font-semibold text-green-600 text-2xl mb-5">–§–∞–∫—Ç</h2>
            </div>

            {/* Image Block */}
            <div className="mb-6 text-center">
              <Image
                src="/placeholder.svg?height=200&width=300"
                alt="Sleep and weight statistics"
                width={300}
                height={200}
                className="mx-auto rounded-lg shadow-sm"
              />
            </div>

            {/* Fact Box */}
            <div className="mt-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4 text-sm text-gray-700 leading-relaxed">
              –•—Ä–æ–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç—Ä–µ—Å—Å –∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ–∫ —Å–Ω–∞ —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ —É—Å–ª–æ–∂–Ω—è—é—Ç –ø–æ—Ö—É–¥–µ–Ω–∏–µ, —Ç–∞–∫ –∫–∞–∫ —É–≤–µ–ª–∏—á–∏–≤–∞—é—Ç –≤—ã—Ä–∞–±–æ—Ç–∫—É –≥–æ—Ä–º–æ–Ω–∞
              –∫–æ—Ä—Ç–∏–∑–æ–ª–∞, —Å—Ç–∏–º—É–ª–∏—Ä—É—é—â–µ–≥–æ –∞–ø–ø–µ—Ç–∏—Ç, –∏ —Å–Ω–∏–∂–∞—é—Ç —É—Ä–æ–≤–µ–Ω—å –≥–æ—Ä–º–æ–Ω–∞ –ª–µ–ø—Ç–∏–Ω–∞, –æ—Ç–≤–µ—á–∞—é—â–µ–≥–æ –∑–∞ —á—É–≤—Å—Ç–≤–æ –Ω–∞—Å—ã—â–µ–Ω–∏—è, —á—Ç–æ
              –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –ø–µ—Ä–µ–µ–¥–∞–Ω–∏—é –∏ –∑–∞–º–µ–¥–ª–µ–Ω–∏—é –º–µ—Ç–∞–±–æ–ª–∏–∑–º–∞. –ö–∞–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –∏–∑–±—ã—Ç–æ—á–Ω—ã–π –≤–µ—Å –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –ø–æ–≤—ã—à–∞–µ—Ç —Ä–∏—Å–∫–∏
              —Ä–∞–∑–≤–∏—Ç–∏—è —Ç–∞–∫–∏—Ö –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏–π, –∫–∞–∫ –¥–∏–∞–±–µ—Ç, –≤—ã—Å–æ–∫–æ–µ –∫—Ä–æ–≤—è–Ω–æ–µ –¥–∞–≤–ª–µ–Ω–∏–µ –∏ –ø—Ä–æ–±–ª–µ–º—ã —Å —Å—É—Å—Ç–∞–≤–∞–º–∏.
              <p className="mt-2 text-xs text-gray-500">
                –ò—Å—Ç–æ—á–Ω–∏–∫:{" "}
                <a
                  href="https://www.sleepfoundation.org/physical-health/weight-loss-and-sleep"
                  target="_blank"
                  rel="noopener noreferrer"
                  className="text-blue-600 hover:text-blue-800 underline"
                >
                  –°–æ–Ω –∏ –ø–æ—Ç–µ—Ä—è –≤–µ—Å–∞ (—Å—Ç–∞—Ç—å—è)
                </a>
                ,{" "}
                <a
                  href="https://www.healthline.com/health/stress/stress-and-weight-gain#diagnosis"
                  target="_blank"
                  rel="noopener noreferrer"
                  className="text-blue-600 hover:text-blue-800 underline"
                >
                  –°—Ç—Ä–µ—Å—Å –∏ –ø–æ—Ç–µ—Ä—è –≤–µ—Å–∞ (—Å—Ç–∞—Ç—å—è)
                </a>
              </p>
            </div>

            {/* Continue Button */}
            <div className="mt-8">
              <Button
                onClick={() => {
                  setCurrentQuizStep(7)
                  setCurrentStep(5)
                }}
                className="w-full bg-green-600 hover:bg-green-700 text-white py-3 text-lg rounded-full"
              >
                –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å
              </Button>
            </div>
          </CardContent>
        </Card>
      </div>
    </div>
  )

  const renderFactPage3 = () => (
    <div className="min-h-screen bg-gradient-to-br from-green-50 to-peach-50 p-4">
      <div className="max-w-2xl mx-auto">
        {/* Header */}
        <div className="text-center py-8">
          <div className="flex items-center justify-center gap-2 mb-4">
            <Heart className="w-8 h-8 text-green-600" />
            <span className="text-2xl font-bold text-gray-800">NaturalSlim</span>
          </div>
        </div>

        {/* Progress Bar */}
        <div className="mb-8">
          <div className="flex justify-between text-sm text-gray-600 mb-2">
            <span>Progreso: {Math.round(getQuizProgress())}%</span>
            <span>{currentQuizStep + 1}/10</span>
          </div>

          {/* Segmented Progress Bar */}
          <div className="flex gap-1 h-2">
            {/* Segment 1: Questions 1-3 */}
            <div className="flex-[3] bg-gray-200 rounded-l-full overflow-hidden">
              <div
                className="h-full bg-green-600 transition-all duration-300 ease-out"
                style={{
                  width: currentQuizStep < 3 ? `${((currentQuizStep + 1) / 3) * 100}%` : "100%",
                }}
              ></div>
            </div>

            {/* Segment 2: Questions 4-7 */}
            <div className="flex-[4] bg-gray-200 overflow-hidden">
              <div
                className="h-full bg-green-600 transition-all duration-300 ease-out"
                style={{
                  width:
                    currentQuizStep < 3 ? "0%" : currentQuizStep < 7 ? `${((currentQuizStep - 2) / 4) * 100}%` : "100%",
                }}
              ></div>
            </div>

            {/* Segment 3: Questions 8-10 */}
            <div className="flex-[3] bg-gray-200 rounded-r-full overflow-hidden">
              <div
                className="h-full bg-green-600 transition-all duration-300 ease-out"
                style={{
                  width: currentQuizStep < 7 ? "0%" : `${((currentQuizStep - 6) / 3) * 100}%`,
                }}
              ></div>
            </div>
          </div>
        </div>

        {/* Fact Card */}
        <Card className="border-0 shadow-lg">
          <CardContent className="p-8">
            <div className="text-center mb-8">
              <h2 className="font-semibold text-green-600 text-2xl mb-5">–§–∞–∫—Ç</h2>
            </div>

            {/* Image Block */}
            <div className="mb-6 text-center">
              <Image
                src="/placeholder.svg?height=200&width=300"
                alt="Diet statistics"
                width={300}
                height={200}
                className="mx-auto rounded-lg shadow-sm"
              />
            </div>

            {/* Fact Box */}
            <div className="mt-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4 text-sm text-gray-700 leading-relaxed">
              –ú–Ω–æ–≥–∏–º –∂–µ–Ω—â–∏–Ω–∞–º –∫—Ä–∞–π–Ω–µ —Å–ª–æ–∂–Ω–æ –æ—Ç–∫–∞–∑–∞—Ç—å—Å—è –æ—Ç –≤—Ä–µ–¥–Ω–æ–π –µ–¥—ã –∏–∑-–∑–∞ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ —á—É–≤—Å—Ç–≤–∞ –≤–∏–Ω—ã –ø–æ—Å–ª–µ
              –ø–µ—Ä–µ–µ–¥–∞–Ω–∏—è. –ü–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ –¥–∏–µ—Ç—ã —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –æ—Å–æ–±–µ–Ω–Ω–æ —Ç—Ä—É–¥–Ω—ã–º –≤ —É—Å–ª–æ–≤–∏—è—Ö —Å–µ–º—å–∏, –≥–¥–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ª—é–±–∏–º—ã—Ö, –Ω–æ
              –Ω–µ–∑–¥–æ—Ä–æ–≤—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –¥–ª—è –¥–µ—Ç–µ–π –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –ø—Ä–æ–≤–æ—Ü–∏—Ä—É–µ—Ç —Å—Ä—ã–≤—ã. –í —Å–æ—á–µ—Ç–∞–Ω–∏–∏ —Å —Ö—Ä–æ–Ω–∏—á–µ—Å–∫–æ–π —É—Å—Ç–∞–ª–æ—Å—Ç—å—é –∏ –Ω–µ—Ö–≤–∞—Ç–∫–æ–π
              –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ —Å–ø–æ—Ä—Ç, —ç—Ç–æ —Å–æ–∑–¥–∞–µ—Ç –∑–∞–º–∫–Ω—É—Ç—ã–π –∫—Ä—É–≥, –º–µ—à–∞—é—â–∏–π –¥–æ—Å—Ç–∏—á—å –∂–µ–ª–∞–µ–º–æ–≥–æ –≤–µ—Å–∞.
              <p className="mt-2 text-xs text-gray-500">
                –ò—Å—Ç–æ—á–Ω–∏–∫:{" "}
                <a
                  href="https://www.healthline.com/health/emotional-eating"
                  target="_blank"
                  rel="noopener noreferrer"
                  className="text-blue-600 hover:text-blue-800 underline"
                >
                  –ï–¥–∞ –Ω–∞ —ç–º–æ—Ü–∏—è—Ö: –ß—Ç–æ –≤–∞–º —Å–ª–µ–¥—É–µ—Ç –∑–Ω–∞—Ç—å
                </a>
              </p>
            </div>

            {/* Continue Button */}
            <div className="mt-8">
              <Button
                onClick={() => {
                  setCurrentStep(12)
                }}
                className="w-full bg-green-600 hover:bg-green-700 text-white py-3 text-lg rounded-full"
              >
                –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å
              </Button>
            </div>
          </CardContent>
        </Card>
      </div>
    </div>
  )

  const renderTransitionPage = () => (
    <div className="min-h-screen bg-gradient-to-br from-green-50 to-peach-50 p-4">
      <div className="max-w-2xl mx-auto">
        {/* Header */}
        <div className="text-center py-8">
          <div className="flex items-center justify-center gap-2 mb-4">
            <Heart className="w-8 h-8 text-green-600" />
            <span className="text-2xl font-bold text-gray-800">NaturalSlim</span>
          </div>
        </div>

        {/* Question Card */}
        <Card className="border-0 shadow-lg">
          <CardContent className="p-8">
            <div className="text-center mb-8">
              <h2 className="font-semibold text-green-600 text-2xl mb-5">–ü–æ—Å–ª–µ–¥–Ω–∏–π –≤–æ–ø—Ä–æ—Å</h2>
              <h3 className="font-medium text-gray-800 leading-relaxed text-lg">
                –ï—Å–ª–∏ –±—ã —Ç—ã –∏–º–µ–ª–∞ –≤–µ—Å —Å–≤–æ–µ–π –º–µ—á—Ç—ã, —á—Ç–æ –±—ã —Ç—ã —Å–¥–µ–ª–∞–ª–∞ —Å–µ–π—á–∞—Å?
              </h3>
            </div>

            {/* Answer Options */}
            <div className="space-y-4">
              <div
                onClick={() => {
                  analyzeAnswers(answers)
                  setCurrentStep(13)
                }}
                className="flex items-center gap-4 p-4 border-gray-200 hover:border-green-300 hover:bg-green-50 cursor-pointer transition-all border-2 rounded-3xl"
              >
                <span className="text-gray-700 flex-1">–ù–∞–¥–µ–ª–∞ –±—ã –ª—é–±–∏–º–æ–µ –ø–ª–∞—Ç—å–µ, –≤ –∫–æ—Ç–æ—Ä–æ–µ —É–∂–µ –Ω–µ –≤–ª–µ–∑–∞—é</span>
              </div>
              <div
                onClick={() => {
                  analyzeAnswers(answers)
                  setCurrentStep(13)
                }}
                className="flex items-center gap-4 p-4 border-gray-200 hover:border-green-300 hover:bg-green-50 cursor-pointer transition-all border-2 rounded-3xl"
              >
                <span className="text-gray-700 flex-1">
                  –°—Ö–æ–¥–∏–ª–∞ –±—ã –≤ –±–∞—Å—Å–µ–π–Ω –∏–ª–∏ –ø–æ–µ—Ö–∞–ª–∞ –Ω–∞ –ø–ª—è–∂, —á—Ç–æ–±—ã –ø–æ–ø–ª–∞–≤–∞—Ç—å –≤ –±–∏–∫–∏–Ω–∏
                </span>
              </div>
              <div
                onClick={() => {
                  analyzeAnswers(answers)
                  setCurrentStep(13)
                }}
                className="flex items-center gap-4 p-4 border-gray-200 hover:border-green-300 hover:bg-green-50 cursor-pointer transition-all border-2 rounded-3xl"
              >
                <span className="text-gray-700 flex-1">–ü–æ–∏–≥—Ä–∞–ª–∞ –±—ã —Å –¥–µ—Ç—å–º–∏ –≤ –¥–æ–≥–æ–Ω—è–ª–∫–∏</span>
              </div>
              <div
                onClick={() => {
                  analyzeAnswers(answers)
                  setCurrentStep(13)
                }}
                className="flex items-center gap-4 p-4 border-gray-200 hover:border-green-300 hover:bg-green-50 cursor-pointer transition-all border-2 rounded-3xl"
              >
                <span className="text-gray-700 flex-1">
                  –í—ã–¥–µ–ª–∏–ª–∞ –±—ã –≤—Ä–µ–º—è –¥–æ—Å—É–≥—É –∏ –æ–±–æ—à–ª–∞ –ª—é–±–∏–º—ã–µ —É–ª–∏—Ü—ã –≥–æ—Ä–æ–¥–∞ –ø–µ—à–∫–æ–º
                </span>
              </div>
              <div
                onClick={() => {
                  analyzeAnswers(answers)
                  setCurrentStep(13)
                }}
                className="flex items-center gap-4 p-4 border-gray-200 hover:border-green-300 hover:bg-green-50 cursor-pointer transition-all border-2 rounded-3xl"
              >
                <span className="text-gray-700 flex-1">–ù–∞—á–∞–ª–∞ –±—ã –∂–∏—Ç—å –±–æ–ª–µ–µ –∞–∫—Ç–∏–≤–Ω–æ–π –∂–∏–∑–Ω—å—é</span>
              </div>
              <div
                onClick={() => {
                  analyzeAnswers(answers)
                  setCurrentStep(13)
                }}
                className="flex items-center gap-4 p-4 border-gray-200 hover:border-green-300 hover:bg-green-50 cursor-pointer transition-all border-2 rounded-3xl"
              >
                <span className="text-gray-700 flex-1">
                  –ù–∞—á–∞–ª–∞ –±—ã <strong>–∂–∏—Ç—å</strong>
                </span>
              </div>
            </div>
          </CardContent>
        </Card>
      </div>
    </div>
  )

  const renderExplanationPage = () => {
    // Derive letters per answer
    const letters: string[] = answers.map((a) => {
      // @ts-ignore optional letter
      if (a.letter && ["a", "b", "c", "d"].includes(a.letter)) return a.letter
      const q = quizQuestions.find((qz) => qz.id === a.questionId)
      if (!q) return "a"
      const idx = q.options.findIndex((o) => o.text === a.answer)
      return ["a", "b", "c", "d"][idx] || "a"
    })

    while (letters.length < 10) letters.push("a")

    const block1 = letters.slice(0, 3)
    const block2 = letters.slice(3, 7)
    const block3 = letters.slice(7, 10)

    const freq: Record<string, number> = { a: 0, b: 0, c: 0, d: 0 }
    letters.forEach((l) => {
      if (freq[l] !== undefined) freq[l]++
    })
    const total = letters.length || 1
    const pct = (l: string) => Math.round((freq[l] / total) * 100)

    const patternAll = (arr: string[], l: string) => arr.every((x) => x === l)
    const majority = (l: string, th: number) => pct(l) >= th
    const onlyLetters = (allowed: string[]) => letters.every((l) => allowed.includes(l))
    const countIn = (arr: string[], l: string) => arr.filter((x) => x === l).length

    let title = ""
    let intro = ""
    let blocks: { icon?: string; title?: string; text: string }[] = []
    let list: string[] = []
    let footerNote = ""

    if ((patternAll(block1, "a") && patternAll(block2, "a") && patternAll(block3, "a")) || majority("a", 90)) {
      title = "–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ø–∏—Ç–∞–Ω–∏–µ & —É—Å—Ç–∞–ª–æ—Å—Ç—å"
      intro =
        '–°—Ç—Ä–µ—Å—Å, –Ω–µ–¥–æ—Å—ã–ø –∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤—Ä–µ–º–µ–Ω–∏ —Ç–æ–ª–∫–∞—é—Ç –≤–∞—Å –∫ "–±—ã—Å—Ç—Ä–æ–π —ç–Ω–µ—Ä–≥–∏–∏". –≠—Ç–æ –Ω–µ —Å–ª–∞–±–æ—Å—Ç—å, –∞ —Ä–µ–∞–∫—Ü–∏—è –Ω–µ—Ä–≤–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã.'
      blocks = [
        {
          title: "–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç",
          text: "–û—Ä–≥–∞–Ω–∏–∑–º –∏—â–µ—Ç –∫–æ–º—Ñ–æ—Ä—Ç –∏ –±—ã—Å—Ç—Ä–æ–µ —Ç–æ–ø–ª–∏–≤–æ ‚Äî —Å–ª–∞–¥–∫–æ–µ, –∫–æ—Ñ–µ —Å –¥–æ–±–∞–≤–∫–∞–º–∏, –ø–µ—Ä–µ–∫—É—Å—ã.",
        },
        { title: "–ü–æ—á–µ–º—É —Ç—è–∂–µ–ª–æ –º–µ–Ω—è—Ç—å", text: "–£—Å—Ç–∞–ª–æ—Å—Ç—å ‚Üí —Ç—è–≥–∞ –∫ –∫–∞–ª–æ—Ä–∏—è–º ‚Üí —á—É–≤—Å—Ç–≤–æ –≤–∏–Ω—ã ‚Üí –µ—â—ë –±–æ–ª—å—à–µ —Å—Ç—Ä–µ—Å—Å–∞." },
        { title: "–í—ã –Ω–µ –æ–¥–Ω–∏", text: "–¢—ã—Å—è—á–∏ –∂–µ–Ω—â–∏–Ω –≤ –ü–µ—Ä—É –∂–∏–≤—É—Ç –≤ —Ä–µ–∂–∏–º–µ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –∏ –∑–Ω–∞—é—Ç —ç—Ç–æ—Ç —Ü–∏–∫–ª." },
      ]
      list = [
        "–§–æ–∫—É—Å —Å–Ω–∞—á–∞–ª–∞ –Ω–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å–Ω–∞ –∏ —ç–Ω–µ—Ä–≥–∏–∏",
        "–ú–∏–Ω–∏‚Äë–∑–∞–º–µ–Ω—ã –≤–º–µ—Å—Ç–æ –∂—ë—Å—Ç–∫–∏—Ö –∑–∞–ø—Ä–µ—Ç–æ–≤",
        "–°—Ç–∞–±–∏–ª—å–Ω—ã–µ –ø—Ä–∏—ë–º—ã –±–µ–ª–∫–∞ ‚Äî –ø—Ä–æ—Ç–∏–≤ —Å–∫–∞—á–∫–æ–≤ –≥–æ–ª–æ–¥–∞",
      ]
      footerNote = "–ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ –∏—â—É—Ç —Ç–µ, –∫—Ç–æ –≤—ã–≥–æ—Ä–µ–ª –Ω–∞ –º–Ω–æ–≥–æ—á–∏—Å–ª–µ–Ω–Ω—ã—Ö –ø–æ–ø—ã—Ç–∫–∞—Ö ‚Äî —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ."
    } else if ((patternAll(block1, "b") && patternAll(block2, "b") && patternAll(block3, "b")) || majority("b", 90)) {
      title = "–ù–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è"
      intro = "–í—ã —É–∂–µ —á—É–≤—Å—Ç–≤—É–µ—Ç–µ —Ç–µ–ª–æ: –æ—Ç—ë–∫–∏, –æ–¥—ã—à–∫—É, –¥–∏—Å–∫–æ–º—Ñ–æ—Ä—Ç. –ü–æ–Ω–∏–º–∞–Ω–∏–µ –µ—Å—Ç—å ‚Äî —Å–∏—Å—Ç–µ–º—ã –ø–æ–∫–∞ –Ω–µ—Ç."
      blocks = [
        {
          title: "–ó–∞–º–∫–Ω—É—Ç—ã–π –∫—Ä—É–≥",
          text: "–°—Ç—Ä–µ—Å—Å –∏ —É—Å—Ç–∞–ª–æ—Å—Ç—å –º–µ—à–∞—é—Ç –≥–æ—Ç–æ–≤–∏—Ç—å –∏ –¥–≤–∏–≥–∞—Ç—å—Å—è ‚Üí –ø–∏—Ç–∞–Ω–∏–µ —É–ø—Ä–æ—â–∞–µ—Ç—Å—è ‚Üí —Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏–µ –ø–∞–¥–∞–µ—Ç.",
        },
        {
          title: "–í–∞—à —Ä–µ—Å—É—Ä—Å",
          text: "–û—Å–æ–∑–Ω–∞–Ω–Ω–æ—Å—Ç—å —É–∂–µ –µ—Å—Ç—å ‚Äî –Ω—É–∂–Ω–æ –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å –µ—ë –≤ –ø—Ä–æ—Å—Ç—É—é –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏–π.",
        },
      ]
      list = [
        "1 –º–∏–∫—Ä–æ‚Äë–∏–∑–º–µ–Ω–µ–Ω–∏–µ –∑–∞ —Ä–∞–∑ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∑–∞–≤—Ç—Ä–∞–∫ —Å –±–µ–ª–∫–æ–º)",
        '–ü–ª–∞–Ω "–≥–æ—Ç–æ–≤–æ–≥–æ –≤—ã–±–æ—Ä–∞" –¥–ª—è –ø–µ—Ä–µ–∫—É—Å–æ–≤',
        "–õ—ë–≥–∫–∞—è –µ–∂–µ–¥–Ω–µ–≤–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –≤–º–µ—Å—Ç–æ —Ä–µ–¥–∫–∏—Ö —Ç—è–∂—ë–ª—ã—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫",
      ]
    } else if ((patternAll(block1, "c") && patternAll(block2, "c") && patternAll(block3, "c")) || majority("c", 90)) {
      title = "–ò—Å—Ç–æ—â–µ–Ω–∏–µ –∏ –ª–æ–≤—É—à–∫–∞ –ø—Ä–∏–≤—ã—á–µ–∫"
      intro = '–í—ã —Ö–æ—Ç–∏—Ç–µ –ª—É—á—à–µ, –Ω–æ —Ç–µ–ª–æ –∏—Å—Ç–æ—â–µ–Ω–æ: —Å–æ–Ω, —ç–Ω–µ—Ä–≥–∏—è, —Å—É—Å—Ç–∞–≤—ã. –°—Ç–∞—Ä—ã–µ "—É—Ç–µ—à–∏—Ç–µ–ª–∏" —Å—Ç–∞–ª–∏ —Ç–æ—Ä–º–æ–∑–æ–º.'
      blocks = [
        {
          title: "–°–∏–≥–Ω–∞–ª—ã —Ç–µ–ª–∞",
          text: '–£—Å—Ç–∞–ª–æ—Å—Ç—å, –±–æ–ª–∏, —Ç—è–≥–∞ –∫ —Ñ–∞—Å—Ç—Ñ—É–¥—É ‚Äî –º–∞—Ä–∫–µ—Ä—ã –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏, –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ "—Ö–∞—Ä–∞–∫—Ç–µ—Ä".',
        },
        { title: "–ü–æ—á–µ–º—É —Å—Ä—ã–≤—ã", text: "–ù–µ–¥–æ–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–µ–ª–∞–µ—Ç –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—É —Ö—Ä—É–ø–∫–æ–π: –º–æ–∑–≥ –≤—ã–±–∏—Ä–∞–µ—Ç –±—ã—Å—Ç—Ä—ã–π –¥–æ—Ñ–∞–º–∏–Ω." },
      ]
      list = [
        "–°–Ω–∞—á–∞–ª–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–∞–∑—É: —Å–æ–Ω + –≥–∏–¥—Ä–∞—Ç–∞—Ü–∏—è",
        '–ú—è–≥–∫–∏–µ —Ä–∞—Å—Ç—è–∂–∫–∏ / —à–∞–≥–∏ –¥–æ "—Å–ø–æ—Ä—Ç–∞"',
        "–î–æ–±–∞–≤–ª—è—Ç—å, –∞ –Ω–µ –≤—ã—á–∏—Ç–∞—Ç—å: –∫–ª–µ—Ç—á–∞—Ç–∫–∞, –±–µ–ª–æ–∫",
      ]
    } else if (majority("d", 95) || (patternAll(block1, "d") && patternAll(block2, "d") && patternAll(block3, "d"))) {
      title = "–í—ã—Å–æ–∫–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å –∏ —Ä–µ—Å—É—Ä—Å"
      intro = "–£ –≤–∞—Å —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω—ã —É—Å—Ç–æ–π—á–∏–≤—ã–µ –ø—Ä–∏–≤—ã—á–∫–∏ –∏ —Å–∞–º–æ–∫–æ–Ω—Ç—Ä–æ–ª—å. –í—ã –±–ª–∏–∑–∫–∏ –∫ –æ–ø—Ç–∏–º—É–º—É."
      blocks = [
        { title: "–ó–∞–¥–∞—á–∞ —Å–µ–π—á–∞—Å", text: '–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏ –∏–º–µ—Ç—å "–±—ã—Å—Ç—Ä—ã–π –ø–ª–∞–Ω" –Ω–∞ –ø–µ—Ä–∏–æ–¥—ã —Å—Ç—Ä–µ—Å—Å–∞.' },
        { title: "–†–∏—Å–∫", text: "–ü–µ—Ä–µ–≥–æ—Ä–µ—Ç—å –æ—Ç –ø–µ—Ä—Ñ–µ–∫—Ü–∏–æ–Ω–∏–∑–º–∞ –∏–ª–∏ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Ä–∞–Ω–Ω–∏–µ —Å–∏–≥–Ω–∞–ª—ã —É—Å—Ç–∞–ª–æ—Å—Ç–∏." },
      ]
      list = [
        "–¶–∏—Ñ—Ä–æ–≤—ã–µ –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ —Ç–æ—á–∫–∏ (—Å–æ–Ω, —à–∞–≥–∏, –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ)",
        "–ü–µ—Ä–∏–æ–¥–∏–∑–∞—Ü–∏—è –ø–∏—Ç–∞–Ω–∏—è/–Ω–∞–≥—Ä—É–∑–∫–∏",
        '–ì–æ—Ç–æ–≤—ã–π "–∞–Ω—Ç–∏–∫—Ä–∏–∑–∏—Å–Ω—ã–π" –¥–µ–Ω—å —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º —É—Å–∏–ª–∏–µ–º',
      ]
    } else if (majority("d", 80)) {
      title = "–û—Å–æ–∑–Ω–∞–Ω–∏–µ –±–µ–∑ —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —ç–Ω–µ—Ä–≥–∏–∏"
      intro = '–í—ã –∑–Ω–∞–µ—Ç–µ "—á—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ", –Ω–æ –±—ã—Ç –∏ –Ω–µ–¥–æ—Å—ã–ø —Ç—è–Ω—É—Ç –Ω–∞–∑–∞–¥.'
      blocks = [
        { title: "–ü–æ—á–µ–º—É –±—É–∫—Å—É–µ—Ç–µ", text: "–≠–Ω–µ—Ä–≥–∏—è –Ω–∏–∑–∫–∞—è ‚Üí —Å–ª–æ–∂–Ω–æ –¥–µ—Ä–∂–∞—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å ‚Üí —Ä–∞–∑–æ–≤—ã–µ –ø–µ—Ä–µ–µ–¥–∞–Ω–∏—è." },
        { title: "–ß—Ç–æ –≤–∞–∂–Ω–æ", text: "–°–Ω–∏–∑–∏—Ç—å –∫–æ–≥–Ω–∏—Ç–∏–≤–Ω—É—é –Ω–∞–≥—Ä—É–∑–∫—É: –º–µ–Ω—å—à–µ —Ä–µ—à–µ–Ω–∏–π ‚Äî –±–æ–ª—å—à–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–º–æ–≤." },
      ]
      list = [
        "2‚Äì3 –ø–æ–≤—Ç–æ—Ä—è–µ–º—ã—Ö –±–∞–∑–æ–≤—ã—Ö –ø—Ä–∏—ë–º–∞ –ø–∏—â–∏",
        '"–û–∫–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è" –ø–µ—Ä–µ–¥ —Å–Ω–æ–º (30‚Äì40 –º–∏–Ω –±–µ–∑ –≥–∞–¥–∂–µ—Ç–æ–≤)',
        "–ù–µ–±–æ–ª—å—à–∏–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –ø–∞—É–∑—ã –≤–º–µ—Å—Ç–æ —Ä–µ–¥–∫–∏—Ö –¥–æ–ª–≥–∏—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫",
      ]
    } else if (onlyLetters(["a", "b"]) && block3.every((l) => l === "a" || l === "b")) {
      title = "–ö–æ–º—Ñ–æ—Ä—Ç‚Äë–µ–¥–∞ –∏ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è"
      intro = "–ü–∏—Ç–∞–Ω–∏–µ –ø–æ–º–æ–≥–∞–µ—Ç —ç–º–æ—Ü–∏—è–º, –Ω–æ —Ç–µ–ª–æ —É–∂–µ –ø–æ–¥–∞—ë—Ç —Å–∏–≥–Ω–∞–ª—ã –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏."
      blocks = [
        { title: "–ü—Ä–∏–≤—ã—á–∫–∞", text: "–°—Ç—Ä–µ—Å—Å ‚Üí –±—ã—Å—Ç—Ä—ã–π –≤–∫—É—Å–Ω—ã–π —Å—Ç–∏–º—É–ª ‚Üí –∫—Ä–∞—Ç–∫–æ–µ –æ–±–ª–µ–≥—á–µ–Ω–∏–µ." },
        { title: "–¶–µ–Ω–∞", text: "–û—Ç—ë–∫–∏, —É—Å—Ç–∞–ª–æ—Å—Ç—å, —Å–∫–∞—á–∫–∏ —Å–∞—Ö–∞—Ä–∞ ‚Äî –∑–∞–º–µ–¥–ª–µ–Ω–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ." },
      ]
      list = [
        '"–ü–∞—Ä–Ω—ã–µ –ø—Ä–∏–≤—ã—á–∫–∏": —Å—Ç—Ä–µ—Å—Å + –∫–æ—Ä–æ—Ç–∫–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ / –¥—ã—Ö–∞–Ω–∏–µ',
        '–ë–µ–ª–∫–æ–≤–∞—è "–ø–æ–¥–ª–æ–∂–∫–∞" –ø–µ—Ä–µ–¥ —Å–ª–∞–¥–∫–∏–º',
        "–ü–ª–∞–Ω–∏—Ä—É–µ–º —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏—è, –Ω–µ –∑–∞–ø—Ä–µ—â–∞–µ–º",
      ]
    } else if (countIn(block1, "c") > 2 && onlyLetters(["a", "b", "c"]) && !letters.includes("d")) {
      title = "–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –µ—Å—Ç—å ‚Äî —Ä–µ—Å—É—Ä—Å–æ–≤ –º–∞–ª–æ"
      intro = "–£ –≤–∞—Å –µ—Å—Ç—å –∂–µ–ª–∞–Ω–∏–µ –∏, –≤–æ–∑–º–æ–∂–Ω–æ, –∑–Ω–∞–Ω–∏—è, –Ω–æ —Ö—Ä–æ–Ω–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–ª–æ—Å—Ç—å —Å—Ä—ã–≤–∞–µ—Ç –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—É."
      blocks = [
        { title: "–ö–æ—Ä–µ–Ω—å", text: "–≠–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∏–π –¥–µ—Ñ–∏—Ü–∏—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è, –∞ –Ω–µ —Å–∏–ª—ã –≤–æ–ª–∏." },
        { title: "–ß—Ç–æ –¥–∞—ë—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å", text: "–ú–∏–∫—Ä–æ‚Äë—Ä–∏—Ç—É–∞–ª—ã —Å–Ω–∞ –∏ –ø–∏—Ç–∞–Ω–∏—è + —Ç—Ä–µ–∫–∏–Ω–≥ –ø–∞—Ä—ã –ø—Ä–æ—Å—Ç—ã—Ö –º–µ—Ç—Ä–∏–∫." },
      ]
      list = [
        "–û–¥–∏–Ω–∞–∫–æ–≤–æ–µ –≤—Ä–µ–º—è –ø–æ–¥—ä—ë–º–∞ 5‚Äì6 –¥–Ω–µ–π –≤ –Ω–µ–¥–µ–ª—é",
        "–ú–∏–Ω–∏‚Äë—É—Ç—Ä–æ: –≤–æ–¥–∞ + –±–µ–ª–æ–∫",
        "–ü–æ—Ä–æ–≥ –≤—Ö–æ–¥–∞ –≤ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å ‚â§5 –º–∏–Ω—É—Ç",
      ]
    } else {
      title = "–°–º–µ—à–∞–Ω–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å"
      intro = "–ï—Å—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã —É—Å—Ç–∞–ª–æ—Å—Ç–∏, —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –ø–∏—Ç–∞–Ω–∏—è –∏ –ø–æ–∏—Å–∫–∞ –∫–æ–Ω—Ç—Ä–æ–ª—è."
      blocks = [
        { title: "–§–æ–∫—É—Å", text: '–°–æ–±—Ä–∞—Ç—å "–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∫–∞—Ä–∫–∞—Å": —Å–æ–Ω, –≤–æ–¥–∞, –±–µ–ª–æ–∫, —à–∞–≥–∏.' },
        { title: "–î–∞–ª—å—à–µ", text: "–¢–æ—á–µ—á–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã." },
      ]
      list = [
        "1 –±–∞–∑–æ–≤–∞—è –ø—Ä–∏–≤—ã—á–∫–∞ –∫–∞–∂–¥—ã–µ 5‚Äì7 –¥–Ω–µ–π",
        "–û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ vs –ø–µ—Ä–µ–∫—É—Å—ã",
        "–ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ —É—Å–ª–æ–∂–Ω–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏",
      ]
    }

    return (
      <div className="min-h-screen bg-gradient-to-br from-green-50 to-peach-50 p-4">
        <div className="max-w-2xl mx-auto py-8">
          <div className="text-center mb-6">
            <div className="flex items-center justify-center gap-2">
              <Heart className="w-8 h-8 text-green-600" />
              <span className="text-2xl font-bold text-gray-800">NaturalSlim</span>
            </div>
          </div>
          <div className="bg-white/90 backdrop-blur shadow-lg rounded-2xl p-8">
            <h2 className="text-2xl font-bold text-green-600 mb-4 text-center">{title}</h2>
            <p className="text-gray-700 text-base leading-relaxed mb-6">{intro}</p>

            <div className="space-y-4 mb-6">
              {blocks.map((b, i) => (
                <div key={i} className="bg-green-50 border border-green-100 rounded-xl p-4">
                  {b.title && <h3 className="font-semibold text-gray-800 mb-1">{b.title}</h3>}
                  <p className="text-gray-700 text-sm leading-relaxed">{b.text}</p>
                </div>
              ))}
            </div>

            {list.length > 0 && (
              <div className="mb-6">
                <h4 className="text-sm font-semibold text-gray-800 uppercase tracking-wide mb-2">–ß—Ç–æ –¥–µ–ª–∞—Ç—å —Å–µ–π—á–∞—Å</h4>
                <ul className="space-y-2 text-sm text-gray-700">
                  {list.map((li, idx) => (
                    <li key={idx} className="flex gap-2">
                      <span className="mt-0.5 w-2 h-2 rounded-full bg-green-500 flex-shrink-0"></span>
                      <span>{li}</span>
                    </li>
                  ))}
                </ul>
              </div>
            )}

            {footerNote && (
              <div className="text-xs text-gray-500 bg-gray-50 rounded-lg p-3 leading-relaxed">{footerNote}</div>
            )}

            <button
              onClick={() => setCurrentStep(15)}
              className="mt-8 w-full bg-green-600 hover:bg-green-700 text-white font-medium py-3 rounded-full text-lg transition-colors"
            >
              –°–æ–≥–ª–∞—Å–Ω—ã?
            </button>
          </div>
        </div>
      </div>
    )
  }

  const renderResultPage = () => (
    <div className="min-h-screen bg-gradient-to-br from-green-50 to-peach-50 p-4">
      <div className="max-w-3xl mx-auto">
        {/* Header */}
        <div className="text-center py-8">
          <div className="flex items-center justify-center gap-2 mb-4">
            <Heart className="w-8 h-8 text-green-600" />
            <span className="text-2xl font-bold text-gray-800">NaturalSlim</span>
          </div>
        </div>

        {/* Main Content */}
        <div className="bg-white/90 backdrop-blur shadow-lg rounded-2xl p-8">
          {/* Page Headline */}
          <h2 className="text-3xl font-bold text-center text-gray-800 mb-6">Your personalized plan is ready!</h2>

          {/* Intro Paragraph */}
          <p className="text-gray-700 text-lg leading-relaxed italic text-center mb-8">
            Based on your answers, you're facing at least two factors that strongly slow down metabolism: irregular meals
            and elevated stress levels. In such cases nutritionists advise starting not with strict diets or exhausting
            workouts, but with a gentle nutrition‚Äëadjustment plan and supporting the body through safe micronutrients and
            plant complexes.
          </p>

          {/* Cards Container */}
          <div className="grid md:grid-cols-2 gap-6 mb-8">
            {/* Natural Ingredients Card */}
            <div className="bg-green-50 border border-green-100 rounded-2xl p-6 shadow-sm">
              <div className="flex items-center gap-3 mb-4">
                <span className="text-2xl">üçÉ</span>
                <h3 className="text-xl font-semibold text-gray-800">Natural ingredients</h3>
              </div>
              <ul className="space-y-2 text-gray-700">
                <li className="flex items-center gap-2">
                  <span className="w-1.5 h-1.5 bg-green-500 rounded-full"></span>
                  African mango
                </li>
                <li className="flex items-center gap-2">
                  <span className="w-1.5 h-1.5 bg-green-500 rounded-full"></span>
                  Guarana
                </li>
                <li className="flex items-center gap-2">
                  <span className="w-1.5 h-1.5 bg-green-500 rounded-full"></span>
                  Green tea
                </li>
                <li className="flex items-center gap-2">
                  <span className="w-1.5 h-1.5 bg-green-500 rounded-full"></span>
                  Apple cider vinegar
                </li>
              </ul>
            </div>

            {/* How They Help Card */}
            <div className="bg-blue-50 border border-blue-100 rounded-2xl p-6 shadow-sm">
              <div className="flex items-center gap-3 mb-4">
                <span className="text-2xl">‚öôÔ∏è</span>
                <h3 className="text-xl font-semibold text-gray-800">How they help</h3>
              </div>
              <ul className="space-y-3 text-gray-700 mb-4">
                <li className="flex items-center gap-3">
                  <span className="text-green-500">‚úÖ</span>
                  Controls appetite
                </li>
                <li className="flex items-center gap-3">
                  <span className="text-green-500">‚úÖ</span>
                  Reduces sugar cravings
                </li>
                <li className="flex items-center gap-3">
                  <span className="text-green-500">‚úÖ</span>
                  Gently boosts fat burning\
                </li>
                <li className="flex items-center gap-3">
                  <span className="text-green-500">‚úÖ</span>
                  Decreases fluid retention
                </li>
              </ul>
              <p className="text-sm text-gray-500 italic\">No strain on the heart or nervous system.</p>
            </div>
          </div>

          {/* Closing Quote */}
          <div className="bg-amber-50 border-l-4 border-amber-400 rounded-lg p-6 mb-8">
            <p className="text-gray-700 leading-relaxed italic">
              \ "This approach gently resets your metabolism, lowers stress‚Äërelated food cravings, and prevents setbacks.
              It's the very path most women follow to shed excess weight safely and without harsh restrictions."
            </p>
          </div>
        </div>

        {/* CTA Block */}
        <div className="text-center">
          <p className="text-gray-700 text-lg leading-relaxed mb-6">
            We'll hand‚Äëpick the safest 100% natural supplements for you and give easy nutrition tips. Ready to see your
            plan?
          </p>
          <Button
            onClick={() => setCurrentStep(16)}
            className="w-full bg-green-600 hover:bg-green-700 text-white py-4 text-lg rounded-full shadow-lg transform hover:scale-105 transition-all duration-200"
          >
            Yes, let's continue
          </Button>
        </div>
      </div>
    </div>
  )

  const renderOfferPage = () => (
        <div className="min-h-screen bg-gradient-to-br from-green-50 to-peach-50 p-4 relative overflow-hidden">
            {/* Floating dots animation background */}
            <div className="absolute inset-0 opacity-5 pointer-events-none">
                {[...Array(20)].map((_, i) => (
                    <div
                        key={i}
                        className="absolute w-3 h-3 bg-green-400 rounded-full animate-pulse"
                style={{
                    left: `${Math.random() * 100}%`,
                    top: `${Math.random() * 100}%`,
                    animationDelay: `${Math.random() * 10}s`,
                animationDuration: "8s",
            }}
                    ></div>
        ))}
            </div>

            <div className="max-w-6xl mx-auto relative z-10">
                {/* Header */}
                <div className="text-center py-8">
                    <div className="flex items-center justify-center gap-2 mb-4">
                        <Heart className="w-8 h-8 text-green-600" />
                        <span className="text-2xl font-bold text-gray-800">NaturalSlim</span>
                    </div>
                </div>

                {/* Hero Section */}
                <div className="bg-white/90 backdrop-blur shadow-lg rounded-3xl p-8 md:p-12 mb-8">
                    <div className="grid lg:grid-cols-2 gap-8 items-center">
                        <div>
                            <h1 className="text-3xl md:text-4xl lg:text-5xl font-extrabold text-gray-800 leading-tight mb-6">\
                                We have found a solution that has already helped twelve thousand women in Peru lose excess weight
                            </h1>
                            <p className="text-xl md:text-2xl font-medium text-gray-600 mb-8">\
                                100% natural ‚Ä¢ Safe for hypertension and diabetes ‚Ä¢ First results in 7‚Äì10 days
                            </p>
                            <Button
                                className="bg-[#38B000] hover:bg-[#2F9000] text-white px-8 py-4 text-lg rounded-full shadow-lg transform hover:scale-105 transition-all duration-200 mb-4"
                            onClick={() => {
                                document.getElementById('order-form')?.scrollIntoView({ behavior: 'smooth' });
                            }}
              >
                            Get ‚àí50% and personal plan
                        </Button>
                    </div>
                    <div className="relative flex justify-center">
                        <div className="relative">
                            <Image
                                src="/placeholder.svg?height=400&width=300"
                                alt="Esbelita natural weight loss supplement bottle"
                                width={300}
                                height={400}
                                className="drop-shadow-2xl"
                            />
                            <div className="absolute -top-4 -right-4 bg-[#FFCF00] text-gray-800 font-bold px-4 py-2 rounded-full shadow-lg animate-pulse">
                            ‚àí50%
                        </div>
                    </div>
                </div>
            </div>
        </div>

        {/* Benefits List */ }
    <div className="bg-white/90 backdrop-blur shadow-lg rounded-3xl p-8 md:p-12 mb-8" >
        <div className="grid md:grid-cols-2 gap-6">
            {[
                "100% plant-based formula ‚Äì no hormones, no chemicals, no dependency",
            "Clinically gentle ‚Äì compatible with hypertension, diabetes and most medication (doctor consultation advised)",
            "Visible results ‚Äì stimulates gentle fat burning, reduces water retention",
            "Cuts sugar cravings and calms food anxiety",
            "Realistic pace ‚Äì up to 2‚Äì4 kg per month without drastic changes",
            "Holistic impact ‚Äì weight, hormones, energy, sleep and mood in one course",
            "Cost-effective ‚Äì cheaper than a daily coffee; full course, no hidden upsells"
            ].map((benefit, index) => (
            <div key={index} className="flex items-start gap-4">
                <div className="w-6 h-6 bg-[#38B000] rounded-full flex items-center justify-center flex-shrink-0 mt-1">
                    <svg className="w-4 h-4 text-white" fill="currentColor" viewBox="0 0 24 24">
                    <path fillRule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clipRule="evenodd" 
                    />
                </svg>
            </div>
            <p className="text-gray-700 leading-relaxed">{benefit}</p>
        </div>
            ))
}
          </div >
        </div >

    {/* Urgency Banner */ }
    <div className = "bg-[#FFEF87] border border-yellow-300 rounded-2xl p-4 mb-8 text-center" >
          <p className="text-gray-800 font-medium mb-2">
            Summer rush: only 47 bottles left. Your ‚àí50% coupon is reserved for 15 minutes.
          </p>
          <div className="flex justify-center gap-2">\
            <div className="bg-white px-3 py-1 rounded-lg shadow-sm font-bold text-gray-800">14</div>
            <span className="font-bold text-gray-800">:</span>
            <div className="bg-white px-3 py-1 rounded-lg shadow-sm font-bold text-gray-800">32</div>
          </div>
        </div >

    {/* Product & Form Block */ }
    < div id = "order-form" className = "bg-white/90 backdrop-blur shadow-lg rounded-3xl p-8 md:p-12 mb-8" >
        <div className="grid lg:grid-cols-2 gap-8">
            {/* Product Card */}
            <div className="relative">
                <div className="bg-gradient-to-br from-green-50 to-peach-50 rounded-2xl p-6 shadow-md relative">
                    <div className="absolute -top-3 -right-3 bg-[#FFCF00] text-gray-800 font-bold px-3 py-1 rounded-full text-sm shadow-lg">
                        Best Seller
                    </div>
                    <div className="text-center">
                        <Image
                            src="/placeholder.svg?height=250&width=180"
                            alt="Esbelita natural weight loss supplement - best seller"
                            width={180}
                            height={250}
                            className="mx-auto mb-4 drop-shadow-lg"
                        />
                        <h3 className="text-xl font-bold text-gray-800 mb-2">Esbelita Natural</h3>
                        <p className="text-gray-600 text-sm leading-relaxed">
                            Complete 30-day course with African mango, guarana, green tea and apple cider vinegar.
                            Gentle metabolism support for sustainable weight management.
                        </p>
                    </div>
                </div>
            </div>

            {/* Lead Capture Form */}
            <div>
                <h3 className="text-2xl font-bold text-gray-800 mb-6">Secure your discount now</h3>
                <form className="space-y-4">
                    <div>
                        <label htmlFor="name" className="block text-sm font-medium text-gray-700 mb-2">
                            Full Name *
                        </label>
                        <input
                            type="text"
                            id="name"
                            name="name"
                            required
                            className="w-full px-4 py-3 border border-gray-300 rounded-full shadow-sm focus:outline-none focus:ring-2 focus:ring-[#38B000] focus:border-[#38B000]"
                            placeholder="Enter your full name"
                        />
                    </div>
                    <div>
                        <label htmlFor="phone" className="block text-sm font-medium text-gray-700 mb-2">
                            Phone Number *
                        </label>
                        <input
                            type="tel"
                            id="phone"
                            name="phone"
                            required
                            className="w-full px-4 py-3 border border-gray-300 rounded-full shadow-sm focus:outline-none focus:ring-2 focus:ring-[#38B000] focus:border-[#38B000]"
                            placeholder="+51 999 999 999"
                        />
                    </div>
                    <div>
                        <label htmlFor="whatsapp" className="block text-sm font-medium text-gray-700 mb-2">
                            WhatsApp (Optional)
                        </label>
                        <input
                            type="tel"
                            id="whatsapp"
                            name="whatsapp"
                            className="w-full px-4 py-3 border border-gray-300 rounded-full shadow-sm focus:outline-none focus:ring-2 focus:ring-[#38B000] focus:border-[#38B000]"
                            placeholder="WhatsApp number (if different)"
                        />
                    </div>
                    <Button
                        type="submit"
                        className="w-full bg-[#38B000] hover:bg-[#2F9000] text-white py-4 text-lg rounded-full shadow-lg transform hover:scale-105 transition-all duration-200"
                        aria-label="Lock in your 50% discount on Esbelita Natural"
                    >
                        Lock my discount
                    </Button>
                    <p className="text-xs text-gray-500 text-center">We never share your data.</p>
                </form>
            </div>
        </div>
        </div>

    {/* Testimonials */ }
    <div className = "bg-white/90 backdrop-blur shadow-lg rounded-3xl p-8 md:p-12 mb-8">
          <h2 className="text-2xl font-bold text-gray-800 text-center mb-8">What our customers say</h2>
          <div className="grid md:grid-cols-3 gap-6">
            {[
              {
                name: "Mar√≠a, 34, Lima",
                quote: "Lost 6 kg in my first month without feeling deprived. My energy levels are amazing now!",
                avatar: "/placeholder.svg?height=60&width=60"
              },
              {
                name: "Carmen, 41, Arequipa", 
                quote: "Finally something that works with my diabetes medication. My doctor is impressed with my progress.",
                avatar: "/placeholder.svg?height=60&width=60"
              },
              {
                name: "Rosa, 28, Cusco",
                quote: "The sugar cravings disappeared after just one week. I feel in control of my eating again.",
                avatar: "/placeholder.svg?height=60&width=60"
              }
            ].map((testimonial, index) => (
              <div key={index} className="bg-gradient-to-br from-green-50 to-peach-50 rounded-2xl p-4 shadow-sm">
                <div className="flex items-center gap-3 mb-4">
                  <Image
                    src={testimonial.avatar || "/placeholder.svg"}
                    alt={`Customer testimonial from ${testimonial.name}`}
                    width={60}
                    height={60}
                    className="rounded-full shadow-sm"
                  />
                  <div>
                    <div className="flex gap-1 mb-1">
                      {[...Array(5)].map((_, i) => (
                        <span key={i} className="text-[#FFCF00] text-lg">‚òÖ</span>
                      ))}
                    </div>
                    <p className="font-medium text-gray-800">{testimonial.name}</p>
                  </div>
                </div>
                <p className="text-gray-700 italic leading-relaxed">"{testimonial.quote}"</p>
              </div>
            ))}
          </div>
        </div>

    {/* Research Section */ }
    <div className = "bg-white/90 backdrop-blur shadow-lg rounded-3xl p-8 md:p-12 mb-8" >
          <h2 className="text-2xl font-bold text-gray-800 text-center mb-8">Backed by science</h2>
          <div className="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
            {[
              {
                ingredient: "African Mango",
                finding: "Reduces body weight by 28% in clinical trials",
                journal: "Lipids in Health and Disease"
              },
              {
                ingredient: "Guarana",
                finding: "Increases fat oxidation by 24% during exercise",
                journal: "Journal of Nutritional Science"
              },
              {
                ingredient: "Green Tea",
                finding: "Boosts metabolism by 4-5% naturally",
                journal: "American Journal of Clinical Nutrition"
              },
              {
                ingredient: "Apple Cider Vinegar",
                finding: "Reduces belly fat and improves insulin sensitivity",
                journal: "Bioscience, Biotechnology, Biochemistry"
              }
            ].map((study, index) => (
              <div key={index} className="bg-gradient-to-br from-green-50 to-peach-50 rounded-2xl p-4 shadow-sm text-center">
                <Image
                  src={`/placeholder.svg?height=80&width=80&query=${study.ingredient} research journal cover`}
                  alt={`Scientific research on ${study.ingredient}`}
                  width={80}
                  height={80}
                  className="mx-auto mb-3 rounded-lg shadow-sm"
                />
                <h4 className="font-bold text-gray-800 mb-2">{study.ingredient}</h4>
                <p className="text-sm text-gray-600 mb-2">{study.finding}</p>
                <p className="text-xs text-gray-500 italic">{study.journal}</p>
                <a href="#" className="text-xs text-[#38B000] hover:underline">Read source</a>
              </div>
            ))}
          </div>
        </div>

    {/* FAQ Accordion */ }
    < div className = "bg-white/90 backdrop-blur shadow-lg rounded-3xl p-8 md:p-12 mb-8" >
          <h2 className="text-2xl font-bold text-gray-800 text-center mb-8">Frequently asked questions</h2>
          <div className="space-y-4">
            {[
              {
                question: "Is Esbelita safe with my current medications?",
                answer: "Esbelita is made from natural plant extracts and is generally well-tolerated. However, we always recommend consulting with your doctor before starting any new supplement, especially if you're taking medication for hypertension, diabetes, or other conditions."
              },
              {
                question: "How long does one course last?",
                answer: "Each bottle contains a 30-day supply. Most customers see initial results within 7-10 days, with significant changes typically occurring after 2-3 months of consistent use."
              },
              {
                question: "Do I need to follow a strict diet?",
                answer: "No strict diet required! Esbelita works by naturally reducing cravings and supporting your metabolism. We provide simple nutrition guidelines to maximize your results, but no extreme restrictions."
              },
              {
                question: "Can I take this if I'm pregnant or breastfeeding?",
                answer: "We do not recommend Esbelita during pregnancy or breastfeeding. Please wait until after this period and consult with your healthcare provider before starting any weight management program."
              },
              {
                question: "Do I need to exercise intensively?",
                answer: "Not at all! While light physical activity is beneficial for overall health, Esbelita is designed to work without requiring intense exercise routines. Even a 15-minute daily walk can enhance your results."
              },
              {
                question: "What if it doesn't work for me?",
                answer: "We offer a 60-day money-back guarantee. If you're not satisfied with your results after following the program consistently, simply contact our customer service for a full refund."
              }
            ].map((faq, index) => (
              <details key={index} className="group border border-gray-200 rounded-2xl">
                <summary className="flex justify-between items-center cursor-pointer p-6 hover:bg-gray-50 rounded-2xl">
                  <h3 className="font-semibold text-gray-800">{faq.question}</h3>
                  <span className="text-[#38B000] group-open:rotate-180 transition-transform duration-200">
                    <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 9l-7 7-7-7" />
                    </svg>
                  </span>
                </summary>
                <div className="px-6 pb-6">
                  <p className="text-gray-600 leading-relaxed">{faq.answer}</p>
                </div>
              </details>
            ))}
          </div>
        </div>

    {/* Secondary CTA */ }
    < div className = "bg-white/90 backdrop-blur shadow-lg rounded-3xl p-8 md:p-12 mb-8 text-center" >
          <Image
            src="/placeholder.svg?height=300&width=200"
            alt="Esbelita Natural - Get your 50% discount now"
            width={200}
            height={300}
            className="mx-auto mb-6 drop-shadow-2xl"
          />
          <Button 
            className="bg-[#38B000] hover:bg-[#2F9000] text-white px-12 py-4 text-xl rounded-full shadow-lg transform hover:scale-105 transition-all duration-200"
            onClick={() => {
              document.getElementById('order-form')?.scrollIntoView({ behavior: 'smooth' });
            }}
          >
            I want ‚àí50% now
          </Button>
        </div>
      </div>

    {/* Footer */ }
    < footer className = "bg-white/90 backdrop-blur shadow-lg rounded-3xl p-8 text-center" >
        <div className="flex items-center justify-center gap-2 mb-6">
          <Heart className="w-6 h-6 text-green-600" />
          <span className="text-xl font-bold text-gray-800">NaturalSlim</span>
        </div>
        <div className="flex justify-center gap\`\`\`jsx
text-gray-800">NaturalSlim</div>
        <div className="flex justify-center gap-6 mb-6">
          <a href="#" className="text-gray-600 hover:text-[#38B000] text-sm">Privacy Policy</a>
          <a href="#" className="text-gray-600 hover:text-[#38B000] text-sm">Terms of Service</a>
          <a href="#" className="text-gray-600 hover:text-[#38B000] text-sm">Contact</a>
        </div>
        <p className="text-xs text-gray-500 leading-relaxed max-w-4xl mx-auto">
          This product has not been evaluated by DIGEMID. This product is not intended to diagnose, treat, cure, or prevent any disease. Individual results may vary. Testimonials are not necessarily representative of what anyone else using this product may experience. This website and its content are for informational purposes only and are not intended to replace professional medical advice, diagnosis, or treatment.
        </p>
      </footer>
</div >
  )


  {/* Floating WhatsApp Chat Badge */ }
    <div className = "fixed bottom-6 right-6 z-50">
        <button
            className="bg-green-500 hover:bg-green-600 text-white p-4 rounded-full shadow-lg transform hover:scale-110 transition-all duration-200"
            aria-label="Contact us on WhatsApp"
        >
            <svg className="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1" />
            </svg>
        </button>
    </div>

// Main render logic
if (currentStep === 0) return renderLandingPage()
if (currentStep === 1) {
    if (showBMIPage) {
        return renderBMIPage()
    }
    return renderBasicsPage()
}
if (currentStep === 2) return renderPreQuestionnaireIntroPage()
if (currentStep === 3) return renderMiniQuestionPage()
if (currentStep === 4) return renderPreMainQuizIntroPage()
if (currentStep === 5) return renderQuizQuestion()
if (currentStep === 9) return renderFactPage2()
if (currentStep === 11) return renderFactPage3()
if (currentStep === 12) return renderTransitionPage()
if (currentStep === 13) return renderMotivationPage()
if (currentStep === 14) return renderExplanationPage()
if (currentStep === 15) return renderResultPage()
if (currentStep === 16) return <LoadingPage onComplete={() => setCurrentStep(17)} />
if (currentStep === 17) return renderOfferPage()
if (currentStep === 18) return renderThankYouPage()

return null
}
